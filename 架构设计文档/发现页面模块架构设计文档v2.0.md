# 发现页面模块架构设计文档 v2.0

> **基于UNIVERSAL_COMPONENT_ARCHITECTURE_CORE v2.5标准**  
> **完整前后端一体化 + 层级化页面组架构 + 八段式代码规范**  
> **社交内容发现与互动系统**

---

## 📋 文档信息

- **模块名称**：发现页面模块（Discovery Module）
- **页面类型**：社交内容发现页面（关注/热门/同城三Tab结构 + 动态详情 + 话题聚合 + 内容发布 + 举报管理）
- **设计标准**：UNIVERSAL_COMPONENT_ARCHITECTURE_CORE v2.5 + SMART-V+ 增强原则
- **创建日期**：2025年9月30日
- **版本号**：v2.0
- **适用项目**：TxT社交探店APP

---

## 🎯 核心设计原则遵循检查清单

### ✅ 架构标准强制执行项

- [x] **层级化页面组主导架构** - MainPage + 5个SubPages结构
- [x] **前后端一体化强制实施** - API层与后端实现层同时完整交付
- [x] **MyBatis-Plus标准架构** - QueryWrapper/LambdaQueryWrapper查询
- [x] **八段式代码结构** - 所有主文件遵循八段式规范
- [x] **主文件优先原则（强制）** - 所有状态/事件/数据处理/工具函数集中在主文件内，严禁创建独立的Hook/Utils文件
- [x] **按需设计原则** - 仅创建前端实际需要的接口
- [x] **类型安全** - 完整的TypeScript类型定义
- [x] **常量规范** - 所有常量在constants.ts中定义

---

## 📦 一、模块架构总览

### 1.1 页面组层级结构

```
src/pages/Discovery/                          # 📦 发现页面组
├── index.tsx                                  # 🎯 页面组主文件 - 状态管理、导航协调
├── types.ts                                   # 📋 页面组类型定义
├── constants.ts                               # ⚙️ 页面组常量配置
├── README.md                                  # 📖 页面组文档
│
├── 🏠 主页面层 (Main Page)
│   ├── MainPage/                              # 📱 发现主页面（三Tab结构）
│   │   ├── index.tsx                          # 主页面实现（八段式）
│   │   ├── types.ts                           # 主页面类型
│   │   ├── constants.ts                       # 主页面常量
│   │   ├── README.md                          # 主页面文档
│   │   │
│   │   ├── NavigationArea/                    # ✅ 导航区域组件
│   │   │   ├── index.tsx                      # 🎯 Tab切换 + 搜索入口
│   │   │   ├── TabSwitch/                     # 🔸 Tab切换核心逻辑
│   │   │   │   └── index.tsx                  # 关注/热门/同城Tab切换
│   │   │   └── SearchEntry/                   # 🔸 搜索入口组件
│   │   │       └── index.tsx                  # 搜索图标和跳转
│   │   │
│   │   ├── ContentArea/                       # ✅ 内容区域组件
│   │   │   ├── index.tsx                      # 🎯 动态流列表容器
│   │   │   ├── FeedList/                      # 🔸 动态列表核心
│   │   │   │   ├── index.tsx                  # 虚拟列表 + 下拉刷新
│   │   │   │   └── README.md
│   │   │   └── FeedCard/                      # 🔸 动态卡片组件
│   │   │       ├── index.tsx                  # 卡片UI + 交互
│   │   │       └── README.md
│   │   │
│   │   └── BottomNavigation/                  # ✅ 底部导航栏
│   │       ├── index.tsx                      # 🎯 底部Tab导航
│   │       └── README.md
│   │
├── 📄 子页面层 (Sub Pages)
│   │
│   ├── DetailPage/                            # 🎯 动态详情子页面
│   │   ├── index.tsx                          # 详情页实现（八段式）
│   │   ├── types.ts                           # 详情页类型
│   │   ├── constants.ts                       # 详情页常量
│   │   ├── README.md                          # 详情页文档
│   │   │
│   │   ├── ContentArea/                       # ✅ 动态内容区域
│   │   │   ├── index.tsx                      # 完整动态展示
│   │   │   ├── MediaViewer/                   # 🔸 媒体查看器
│   │   │   │   └── index.tsx                  # 图片/视频全屏查看
│   │   │   └── InteractionBar/                # 🔸 互动操作栏
│   │   │       └── index.tsx                  # 点赞/评论/分享/收藏
│   │   │
│   │   ├── CommentArea/                       # ✅ 评论区域
│   │   │   ├── index.tsx                      # 评论列表容器
│   │   │   ├── CommentList/                   # 🔸 评论列表
│   │   │   │   └── index.tsx                  # 评论项 + 子评论
│   │   │   └── CommentSort/                   # 🔸 评论排序
│   │   │       └── index.tsx                  # 时间/热度/点赞排序
│   │   │
│   │   └── InputArea/                         # ✅ 评论输入区域
│   │       ├── index.tsx                      # 评论输入框
│   │       └── README.md
│   │
│   ├── TopicPage/                             # 🎯 话题详情子页面
│   │   ├── index.tsx                          # 话题页实现（八段式）
│   │   ├── types.ts                           # 话题页类型
│   │   ├── constants.ts                       # 话题页常量
│   │   ├── README.md                          # 话题页文档
│   │   │
│   │   ├── HeaderArea/                        # ✅ 话题信息区域
│   │   │   ├── index.tsx                      # 话题名称 + 统计数据
│   │   │   └── TopicStats/                    # 🔸 话题统计
│   │   │       └── index.tsx                  # 参与人数/动态数/热度
│   │   │
│   │   └── FeedArea/                          # ✅ 话题动态区域
│   │       ├── index.tsx                      # 话题相关动态列表
│   │       └── TopicFeedCard/                 # 🔸 话题动态卡片
│   │           └── index.tsx                  # 带用户标识的动态卡片
│   │
│   ├── PublishPage/                           # 🎯 发布动态子页面
│   │   ├── index.tsx                          # 发布页实现（八段式）
│   │   ├── types.ts                           # 发布页类型
│   │   ├── constants.ts                       # 发布页常量
│   │   ├── README.md                          # 发布页文档
│   │   │
│   │   ├── EditorArea/                        # ✅ 编辑器区域
│   │   │   ├── index.tsx                      # 文字编辑器
│   │   │   ├── TitleInput/                    # 🔸 标题输入
│   │   │   │   └── index.tsx
│   │   │   └── ContentInput/                  # 🔸 正文输入
│   │   │       └── index.tsx                  # @用户 + #话题 支持
│   │   │
│   │   ├── MediaArea/                         # ✅ 媒体添加区域
│   │   │   ├── index.tsx                      # 媒体管理容器
│   │   │   ├── MediaPicker/                   # 🔸 媒体选择器
│   │   │   │   └── index.tsx                  # 拍照/相册/视频
│   │   │   └── MediaEditor/                   # 🔸 媒体编辑器
│   │   │       └── index.tsx                  # 裁剪/滤镜
│   │   │
│   │   └── SettingsArea/                      # ✅ 设置区域
│   │       ├── index.tsx                      # 话题和地点选择
│   │       └── README.md
│   │
│   ├── TopicSelectPage/                       # 🎯 话题选择子页面
│   │   ├── index.tsx                          # 话题选择实现（八段式）
│   │   ├── types.ts
│   │   ├── constants.ts
│   │   ├── README.md
│   │   │
│   │   ├── SearchArea/                        # ✅ 话题搜索区域
│   │   │   └── index.tsx                      # 搜索框 + 实时搜索
│   │   │
│   │   └── TopicListArea/                     # ✅ 话题列表区域
│   │       ├── index.tsx                      # 热门/历史话题列表
│   │       └── TopicItem/                     # 🔸 话题项
│   │           └── index.tsx                  # 多选话题项
│   │
│   ├── LocationSelectPage/                    # 🎯 地点选择子页面
│   │   ├── index.tsx                          # 地点选择实现（八段式）
│   │   ├── types.ts
│   │   ├── constants.ts
│   │   ├── README.md
│   │   │
│   │   ├── MapArea/                           # ✅ 地图区域
│   │   │   ├── index.tsx                      # 交互式地图
│   │   │   └── MapControls/                   # 🔸 地图控制
│   │   │       └── index.tsx                  # 定位/缩放按钮
│   │   │
│   │   └── LocationListArea/                  # ✅ 地点列表区域
│   │       ├── index.tsx                      # 附近地点列表
│   │       └── LocationItem/                  # 🔸 地点项
│   │           └── index.tsx                  # 单选地点项
│   │
│   └── ReportPage/                            # 🎯 举报功能子页面
│       ├── index.tsx                          # 举报页实现（八段式）
│       ├── types.ts
│       ├── constants.ts
│       ├── README.md
│       │
│       ├── ReasonArea/                        # ✅ 举报理由区域
│       │   ├── index.tsx                      # 理由选择列表
│       │   └── ReasonItem/                    # 🔸 理由项
│       │       └── index.tsx                  # 单选理由项
│       │
│       └── DescriptionArea/                   # ✅ 详细说明区域
│           └── index.tsx                      # 多行文本输入
│
├── 🌐 前端API接口层
│   ├── apiDiscoveryMain.ts                    # 主页面API（动态流）
│   ├── apiDiscoveryDetail.ts                  # 动态详情API
│   ├── apiDiscoveryTopic.ts                   # 话题详情API
│   ├── apiDiscoveryPublish.ts                 # 发布动态API
│   ├── apiDiscoveryReport.ts                  # 举报功能API
│   ├── apiDiscoveryComment.ts                 # 评论管理API
│   ├── apiDiscoveryInteraction.ts             # 互动操作API
│   └── apiDiscoveryAggregate.ts               # 聚合API（可选）
│
└── 🔌 后端交互层（Java + MyBatis-Plus）
    └── backend/
        ├── entityFeed.java                    # 🏗️ 动态实体
        ├── entityTopic.java                   # 🏗️ 话题实体
        ├── entityComment.java                 # 🏗️ 评论实体
        ├── entityFeedMedia.java               # 🏗️ 媒体文件实体
        ├── entityFeedTopic.java               # 🏗️ 动态话题关联实体
        ├── entityUserInteraction.java         # 🏗️ 用户互动实体
        │
        ├── dtoFeedCreate.java                 # 📦 创建动态DTO
        ├── dtoFeedUpdate.java                 # 📦 更新动态DTO
        ├── dtoCommentCreate.java              # 📦 创建评论DTO
        ├── dtoTopicCreate.java                # 📦 创建话题DTO
        ├── dtoReportSubmit.java               # 📦 提交举报DTO
        │
        ├── voFeedQuery.java                   # 🔍 动态查询VO
        ├── voTopicQuery.java                  # 🔍 话题查询VO
        ├── voCommentQuery.java                # 🔍 评论查询VO
        │
        ├── controllerFeed.java                # 🎯 动态控制器
        ├── controllerTopic.java               # 🎯 话题控制器
        ├── controllerComment.java             # 🎯 评论控制器
        ├── controllerInteraction.java         # 🎯 互动控制器
        ├── controllerReport.java              # 🎯 举报控制器
        │
        ├── serviceFeed.java                   # ⚙️ 动态服务接口
        ├── serviceTopic.java                  # ⚙️ 话题服务接口
        ├── serviceComment.java                # ⚙️ 评论服务接口
        ├── serviceInteraction.java            # ⚙️ 互动服务接口
        ├── serviceReport.java                 # ⚙️ 举报服务接口
        │
        ├── serviceImplFeed.java               # 🔧 动态服务实现
        ├── serviceImplTopic.java              # 🔧 话题服务实现
        ├── serviceImplComment.java            # 🔧 评论服务实现
        ├── serviceImplInteraction.java        # 🔧 互动服务实现
        ├── serviceImplReport.java             # 🔧 举报服务实现
        │
        ├── mapperFeed.java                    # 🗄️ 动态Mapper
        ├── mapperTopic.java                   # 🗄️ 话题Mapper
        ├── mapperComment.java                 # 🗄️ 评论Mapper
        ├── mapperFeedMedia.java               # 🗄️ 媒体Mapper
        ├── mapperUserInteraction.java         # 🗄️ 互动Mapper
        │
        ├── queryFeedBuilder.java              # 🏗️ 动态查询构建器
        ├── queryTopicBuilder.java             # 🏗️ 话题查询构建器
        └── queryCommentBuilder.java           # 🏗️ 评论查询构建器
```

### 1.2 页面层级说明

| 层级 | 命名 | 职责 | 数量 |
|------|------|------|------|
| **页面组** | `Discovery/` | 发现模块完整业务 | 1个 |
| **主页面** | `MainPage/` | 三Tab动态流主入口 | 1个 |
| **子页面** | `DetailPage/`, `TopicPage/`, `PublishPage/`, `TopicSelectPage/`, `LocationSelectPage/`, `ReportPage/` | 子功能页面 | 6个 |
| **区域组件** | `NavigationArea/`, `ContentArea/`, 等 | 页面功能区域 | 17个 |
| **核心组件** | `TabSwitch/`, `FeedCard/`, 等 | 区域核心逻辑 | 20+个 |

---

## 📋 二、核心类型定义（types.ts）

### 2.1 页面组级别类型

```typescript
// 页面组Props接口
export interface DiscoveryProps {
  initialTab?: TabType;
  userId?: string;
}

// 页面组状态类型
export interface DiscoveryState {
  activeTab: TabType;
  isLoading: boolean;
  error: Error | null;
}

// Tab类型
export type TabType = 'follow' | 'hot' | 'local';
```

### 2.2 动态实体类型

```typescript
// 动态数据类型
export interface Feed {
  id: string;
  userId: string;
  userInfo: UserInfo;
  title?: string;
  content: string;
  mediaList: MediaItem[];
  topicList: Topic[];
  location?: LocationInfo;
  
  // 互动数据
  likeCount: number;
  commentCount: number;
  shareCount: number;
  collectCount: number;
  viewCount: number;
  
  // 用户互动状态
  isLiked: boolean;
  isCollected: boolean;
  
  // 时间戳
  createdAt: number;
  updatedAt: number;
}

// 用户信息类型
export interface UserInfo {
  id: string;
  nickname: string;
  avatar: string;
  gender?: 'male' | 'female';
  age?: number;
  tags?: UserTag[];
  isFollowed: boolean;
}

// 用户标签类型
export interface UserTag {
  type: 'gender_age' | 'certified' | 'popular' | 'custom';
  label: string;
  color: string;
}

// 媒体项类型
export interface MediaItem {
  id: string;
  type: 'image' | 'video';
  url: string;
  thumbnailUrl?: string;
  width: number;
  height: number;
  duration?: number; // 视频时长(秒)
}

// 话题类型
export interface Topic {
  name: string;
  description?: string;
  coverUrl?: string;
  participantCount: number;
  postCount: number;
  hotIndex: number;
  trendChange: number;
  createdAt: number;
}

// 位置信息类型
export interface LocationInfo {
  id: string;
  name: string;
  address: string;
  latitude: number;
  longitude: number;
  distance?: number; // 距离用户的距离(米)
}
```

### 2.3 评论相关类型

```typescript
// 评论数据类型
export interface Comment {
  id: string;
  feedId: string;
  userId: string;
  userInfo: UserInfo;
  content: string;
  replyTo?: string;
  replyToUser?: UserInfo;
  likeCount: number;
  isLiked: boolean;
  replies: Comment[];
  createdAt: number;
}

// 评论排序类型
export type CommentSortType = 'time' | 'hot' | 'like';
```

### 2.4 API交互类型

```typescript
// API响应基础类型
export interface ApiResponse<T> {
  code: number;
  message: string;
  data: T;
  timestamp: number;
}

// 分页查询参数
export interface PageQuery {
  page: number;
  pageSize: number;
}

// 动态列表响应
export interface FeedListResponse {
  list: Feed[];
  total: number;
  hasMore: boolean;
  nextCursor?: string;
}

// 创建动态请求
export interface CreateFeedRequest {
  title?: string;
  content: string;
  mediaIds: string[];
  topicNames: string[];
  locationId?: string;
}

// 创建评论请求
export interface CreateCommentRequest {
  feedId: string;
  content: string;
  replyTo?: string;
}

// 举报请求
export interface ReportRequest {
  targetType: 'feed' | 'comment' | 'user';
  targetId: string;
  reasonId: number;
  description?: string;
}

// 互动操作请求
export interface InteractionRequest {
  targetType: 'feed' | 'comment';
  targetId: string;
  action: 'like' | 'unlike' | 'collect' | 'uncollect';
}
```

### 2.5 组件Props类型

```typescript
// 动态卡片Props
export interface FeedCardProps {
  feed: Feed;
  onUserClick: (userId: string) => void;
  onTopicClick: (topicName: string) => void;
  onLike: (feedId: string) => void;
  onComment: (feedId: string) => void;
  onShare: (feedId: string) => void;
  onCollect: (feedId: string) => void;
}

// 评论项Props
export interface CommentItemProps {
  comment: Comment;
  onReply: (commentId: string) => void;
  onLike: (commentId: string) => void;
  onMore: (commentId: string) => void;
}

// 媒体查看器Props
export interface MediaViewerProps {
  mediaList: MediaItem[];
  initialIndex: number;
  onClose: () => void;
}
```

---

## ⚙️ 三、常量配置（constants.ts）

### 3.1 UI尺寸常量

```typescript
export const UI_SIZES = {
  // 系统栏高度
  SYSTEM_STATUS_BAR_HEIGHT: 44,
  NAVIGATION_BAR_HEIGHT: 56,
  BOTTOM_TAB_BAR_HEIGHT: 80,
  SAFE_AREA_BOTTOM: 34,
  
  // 用户头像尺寸
  USER_AVATAR_SIZE_SMALL: 32,
  USER_AVATAR_SIZE_MEDIUM: 40,
  USER_AVATAR_SIZE_LARGE: 48,
  
  // 卡片尺寸
  CARD_PADDING_HORIZONTAL: 16,
  CARD_PADDING_VERTICAL: 12,
  CARD_MARGIN_BOTTOM: 8,
  
  // 媒体尺寸
  MEDIA_BORDER_RADIUS: 8,
  MEDIA_BORDER_RADIUS_LARGE: 12,
  MEDIA_GRID_GAP: 4,
  
  // 按钮尺寸
  BUTTON_HEIGHT: 32,
  BUTTON_HEIGHT_LARGE: 40,
  ICON_SIZE_SMALL: 16,
  ICON_SIZE_MEDIUM: 20,
  ICON_SIZE_LARGE: 24,
} as const;
```

### 3.2 颜色常量

```typescript
export const COLORS = {
  // 主题色
  PRIMARY: '#8A2BE2',
  PRIMARY_LIGHT: '#A855F7',
  PRIMARY_DARK: '#6B21A8',
  
  // 文字颜色
  TEXT_PRIMARY: '#000000',
  TEXT_SECONDARY: '#666666',
  TEXT_TERTIARY: '#999999',
  TEXT_QUATERNARY: '#CCCCCC',
  TEXT_DISABLED: '#E5E5E5',
  
  // 背景颜色
  BACKGROUND_WHITE: '#FFFFFF',
  BACKGROUND_GRAY: '#F5F5F5',
  BACKGROUND_DARK: '#F0F0F0',
  BACKGROUND_MASK: 'rgba(0, 0, 0, 0.5)',
  
  // 功能颜色
  LIKE_COLOR: '#FF0000',
  LIKE_COLOR_ACTIVE: '#FF4444',
  COLLECT_COLOR: '#FFD700',
  SHARE_COLOR: '#666666',
  COMMENT_COLOR: '#666666',
  
  // 标签颜色
  TAG_GENDER_MALE: '#4A9EFF',
  TAG_GENDER_FEMALE: '#FF69B4',
  TAG_POPULAR: '#FF8C00',
  TAG_CERTIFIED: '#00C853',
  
  // 状态颜色
  SUCCESS: '#00C853',
  ERROR: '#FF3B30',
  WARNING: '#FF9500',
  INFO: '#007AFF',
  
  // 分隔线颜色
  DIVIDER: '#F0F0F0',
  DIVIDER_LIGHT: '#F5F5F5',
  BORDER: '#E5E5E5',
} as const;
```

### 3.3 动画时长常量

```typescript
export const ANIMATION_DURATION = {
  INSTANT: 0,
  FAST: 150,
  SHORT: 200,
  MEDIUM: 300,
  LONG: 500,
  SLOW: 800,
} as const;
```

### 3.4 Tab类型常量

```typescript
export const TAB_TYPES = {
  FOLLOW: 'follow',
  HOT: 'hot',
  LOCAL: 'local',
} as const;

export const TAB_LABELS = {
  [TAB_TYPES.FOLLOW]: '关注',
  [TAB_TYPES.HOT]: '热门',
  [TAB_TYPES.LOCAL]: '同城',
} as const;
```

### 3.5 举报理由常量

```typescript
export const REPORT_REASONS = {
  SPAM: {
    id: 1,
    title: '垃圾信息',
    desc: '广告、营销信息等',
  },
  INAPPROPRIATE: {
    id: 2,
    title: '不当内容',
    desc: '色情、暴力、血腥等',
  },
  COPYRIGHT: {
    id: 3,
    title: '侵权内容',
    desc: '盗用他人作品、肖像等',
  },
  FAKE: {
    id: 4,
    title: '虚假信息',
    desc: '谣言、不实消息等',
  },
  HARASSMENT: {
    id: 5,
    title: '骚扰他人',
    desc: '恶意@用户、言语攻击等',
  },
  OTHER: {
    id: 6,
    title: '其他',
    desc: '其他违规行为',
  },
} as const;
```

### 3.6 评论排序常量

```typescript
export const COMMENT_SORT_TYPES = {
  TIME: 'time',
  HOT: 'hot',
  LIKE: 'like',
} as const;

export const COMMENT_SORT_LABELS = {
  [COMMENT_SORT_TYPES.TIME]: '按时间',
  [COMMENT_SORT_TYPES.HOT]: '按热度',
  [COMMENT_SORT_TYPES.LIKE]: '按点赞',
} as const;
```

### 3.7 API配置常量

```typescript
export const API_CONFIG = {
  BASE_URL: '/api/v1/discovery',
  TIMEOUT: 10000,
  PAGE_SIZE: 20,
  RETRY_TIMES: 3,
  RETRY_DELAY: 1000,
} as const;
```

### 3.8 媒体限制常量

```typescript
export const MEDIA_LIMITS = {
  MAX_IMAGE_COUNT: 9,
  MAX_VIDEO_COUNT: 1,
  MAX_IMAGE_SIZE: 10 * 1024 * 1024, // 10MB
  MAX_VIDEO_SIZE: 100 * 1024 * 1024, // 100MB
  MAX_VIDEO_DURATION: 300, // 5分钟
  
  IMAGE_QUALITY: 0.8,
  VIDEO_QUALITY: 'high',
} as const;
```

### 3.9 内容限制常量

```typescript
export const CONTENT_LIMITS = {
  TITLE_MAX_LENGTH: 50,
  CONTENT_MAX_LENGTH: 1000,
  COMMENT_MAX_LENGTH: 500,
  REPORT_DESC_MAX_LENGTH: 500,
  
  MAX_TOPIC_COUNT: 5,
  MAX_TOPIC_NAME_LENGTH: 20,
} as const;
```

---

## 🚨 四、主文件优先原则强化说明

### 4.1 严禁创建的独立文件类型

```
🚫 ❌ 绝对禁止创建以下类型的独立文件：

1. 状态管理文件：
   ❌ useDiscoveryState.ts
   ❌ useMainPageData.ts
   ❌ usePublishFlow.ts
   ❌ useToggle.ts / useLoading.ts / useVisible.ts
   
2. 事件处理文件：
   ❌ onClickHandlers.ts
   ❌ onLongPressHandlers.ts
   ❌ eventHandlers.ts
   
3. 工具函数文件：
   ❌ utilsFormat.ts（格式化函数）
   ❌ utilsDisplay.ts（显示工具）
   ❌ utilsHelper.ts（辅助函数）
   ❌ utilsCalculate.ts（计算函数）
   
4. 数据处理文件：
   ❌ processData.ts
   ❌ processValidation.ts
   ❌ processContent.ts
```

### 4.2 正确的实现方式

```typescript
✅ 所有逻辑都集中在主文件的八段式结构中：

// MainPage/index.tsx
export default function MainPage() {
  // #region 5. Utils & Helpers
  // 🎯 所有工具函数集中在这里
  const formatCount = (count: number) => {
    if (count >= 10000) return `${(count / 10000).toFixed(1)}万`;
    return count.toString();
  };
  
  const formatTime = (timestamp: number) => {
    // 时间格式化逻辑
  };
  
  const calculateLayout = (count: number) => {
    // 布局计算逻辑
  };
  // #endregion
  
  // #region 6. State Management
  // 🎯 所有状态管理集中在这里
  const [activeTab, setActiveTab] = useState('hot');
  const [feedList, setFeedList] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState(null);
  // #endregion
  
  // #region 7. Domain Logic
  // 🎯 所有事件处理和业务逻辑集中在这里
  const handleTabChange = useCallback((tab) => {
    setActiveTab(tab);
    loadFeedList(tab);
  }, []);
  
  const handleLike = useCallback((feedId) => {
    // 点赞逻辑
  }, []);
  
  const loadFeedList = async (tab) => {
    setIsLoading(true);
    try {
      const data = await apiFetchFeedList(tab);
      setFeedList(data);
    } catch (err) {
      setError(err);
    } finally {
      setIsLoading(false);
    }
  };
  // #endregion
  
  // #region 8. UI Components & Rendering
  return (/* JSX */);
  // #endregion
}
```

### 4.3 移动端特有功能例外（极少数情况）

```
⚠️ 仅以下移动端特有功能可以考虑抽离（必须有充分理由）：

1. 设备权限处理（跨多个页面复用）：
   ⚠️ permissions.ts - 相机、相册、位置权限请求

2. 复杂媒体处理（>100行代码且独立）：
   ⚠️ mediaCompress.ts - 图片压缩、视频压缩算法

3. 第三方SDK封装（必须统一管理）：
   ⚠️ mapSDK.ts - 地图SDK封装
   ⚠️ paymentSDK.ts - 支付SDK封装

❌ 但仍然禁止为简单的UI状态、表单处理、格式化函数创建独立文件
```

---

*由于文档篇幅较长，我将分多个部分创建。这是第一部分，包含了：*
- *文档信息和架构标准检查*
- *完整的页面组层级结构*
- *核心类型定义*
- *所有常量配置*
- *🎯 主文件优先原则强化说明（新增）*

*接下来请参考补充文档了解：*
- *前端API接口层设计*
- *后端交互层设计*
- *八段式代码完整示例*
- *性能优化方案*
- *实施检查清单*
