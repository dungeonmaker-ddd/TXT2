# ğŸ’¬ æ¶ˆæ¯æ¨¡å—æ¶æ„æ–‡æ¡£ v2.0 (ä¿®æ­£ç‰ˆ)

> **AIåä½œå‹å¥½** - ä¸ºAIç†è§£å’Œä¿®æ”¹ä¼˜åŒ–çš„æ¶æ„è¯´æ˜æ–‡æ¡£
> 
> **åŸºäºç°æœ‰é¡¹ç›®æ¶æ„æ ‡å‡†** - ä¸Homepage/AuthModuleå®Œå…¨ä¸€è‡´çš„æ¶æ„è®¾è®¡

---

## ğŸ“‹ **å¿«é€Ÿæ¦‚è§ˆ**

| é¡¹ç›®ä¿¡æ¯ | è¯¦ç»†å†…å®¹ |
|---------|---------|
| **æ¨¡å—åç§°** | Messages æ¶ˆæ¯æ¨¡å— (Feature Module) |
| **æŠ€æœ¯æ ˆ** | React Native + Expo Router + Zustand + TypeScript |
| **æ¶æ„æ¨¡å¼** | å…«æ®µå¼å•æ–‡ä»¶æ¶æ„ + å±‚çº§åŒ–é¡µé¢ç»„ |
| **ç»„ä»¶æ•°é‡** | 7ä¸ªé¡µé¢ + 3ä¸ªæ ¸å¿ƒåŒºåŸŸç»„ä»¶ + 8ä¸ªå…±äº«ç»„ä»¶ |
| **è·¯ç”±æ¨¡å¼** | Expo Routeræ–‡ä»¶ç³»ç»Ÿè·¯ç”± |
| **çŠ¶æ€ç®¡ç†** | Zustand + AsyncStorageæŒä¹…åŒ– + WebSocketå®æ—¶ |
| **å‘½åè§„èŒƒ** | Screen(è·¯ç”±) + Page(ä¸šåŠ¡) + Area(åŒºåŸŸ) + Component(é€šç”¨) |
| **å‚è€ƒæ ‡å‡†** | UNIVERSAL_COMPONENT_ARCHITECTURE_CORE v2.5 |
| **å‚è€ƒæ¨¡å—** | Homepageæ¨¡å— + AuthModule |

---

## ğŸ¯ **æ¶æ„ä¿®æ­£è¯´æ˜**

### ğŸ“Š **v2.0ä¿®æ­£å†…å®¹**

æœ¬ç‰ˆæœ¬åŸºäºç°æœ‰é¡¹ç›®ï¼ˆXiangYuPai-RNExpoAPPï¼‰çš„æ¶æ„æ ‡å‡†è¿›è¡Œäº†å…¨é¢ä¿®æ­£ï¼š

| ä¿®æ­£é¡¹ | v1.0è®¾è®¡ | v2.0ä¿®æ­£ | ä¿®æ­£åŸå›  |
|-------|---------|----------|---------|
| **ç›®å½•ç»“æ„** | `src/pages/Messages/` | `src/features/Messages/` | ä¸ç°æœ‰é¡¹ç›®ç»Ÿä¸€ |
| **åç«¯æŠ€æœ¯** | MyBatis-Plus + Java | Express + TypeScript | ä¸Expoç”Ÿæ€åŒ¹é… |
| **ç»„ä»¶è®¾è®¡** | 15ä¸ªå¤æ‚ç»„ä»¶ | 8ä¸ªç®€åŒ–ç»„ä»¶ | éµå¾ªYAGNIåŸåˆ™ |
| **çŠ¶æ€ç®¡ç†** | å¤æ‚å¤šå±‚çŠ¶æ€ | ç®€åŒ–å•å±‚çŠ¶æ€ | åŸºäºç°æœ‰Storeæ¨¡å¼ |
| **ä¸»é¢˜é¢œè‰²** | #8A2BE2 (ç´«è‰²) | #6366F1 (è“è‰²) | ä¸ç°æœ‰Buttonç»Ÿä¸€ |
| **APIè®¾è®¡** | å¤æ‚åˆ†å±‚æ¶æ„ | ç®€åŒ–RESTful | æŒ‰éœ€è®¾è®¡åŸåˆ™ |

### ğŸ† **è®¾è®¡æ ‡å‡†**

- âœ… **æ¶æ„ä¸€è‡´æ€§**: ä¸Homepage/AuthModule 100%ä¸€è‡´
- âœ… **ç»„ä»¶æ¨¡æ¿**: åŸºäºç°æœ‰Button.tsxçš„å…«æ®µå¼æ¨¡æ¿
- âœ… **å‘½åè§„èŒƒ**: ä¸¥æ ¼éµå¾ªFeature/Page/Area/Componentä½“ç³»
- âœ… **æŠ€æœ¯æ ˆ**: å®Œå…¨å…¼å®¹ç°æœ‰é¡¹ç›®çš„æŠ€æœ¯é€‰å‹
- âœ… **ç§»åŠ¨ç«¯ä¼˜å…ˆ**: è¡¥å……ç§»åŠ¨ç«¯å¿…éœ€çš„äº¤äº’ç»„ä»¶

---

## ğŸ—ï¸ **æ ¸å¿ƒæ¶æ„**

### ğŸ“‚ **å®Œæ•´ç›®å½•ç»“æ„**

```
ğŸ“± Expo Routerå±‚ (app/) - è·¯ç”±é€‚é…å±‚
app/(tabs)/messages/                        # æ¶ˆæ¯æ¨¡å—è·¯ç”±ç»„
â”œâ”€â”€ index.tsx                               # è·¯ç”±: /(tabs)/messages â†’ MessagesScreen
â”œâ”€â”€ likes.tsx                               # è·¯ç”±: /(tabs)/messages/likes â†’ LikesScreen
â”œâ”€â”€ comments.tsx                            # è·¯ç”±: /(tabs)/messages/comments â†’ CommentsScreen
â”œâ”€â”€ followers.tsx                           # è·¯ç”±: /(tabs)/messages/followers â†’ FollowersScreen
â”œâ”€â”€ notifications.tsx                       # è·¯ç”±: /(tabs)/messages/notifications â†’ NotificationsScreen
â”œâ”€â”€ chat/
â”‚   â””â”€â”€ [conversationId].tsx               # è·¯ç”±: /(tabs)/messages/chat/:id â†’ ChatScreen
â””â”€â”€ _layout.tsx                            # æ¶ˆæ¯æ¨¡å—å¸ƒå±€é…ç½®

ğŸ¯ ä¸šåŠ¡ç»„ä»¶å±‚ (src/features/) - ä¸šåŠ¡å®ç°å±‚
src/features/Messages/                      # ğŸ“¦ æ¶ˆæ¯åŠŸèƒ½æ¨¡å—
â”œâ”€â”€ index.ts                                # ğŸ¯ æ¨¡å—ä¸»æ–‡ä»¶ - ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰é¡µé¢
â”œâ”€â”€ types.ts                                # ğŸ“‹ æ¨¡å—ç±»å‹å®šä¹‰ - å¯¼å‡ºæ‰€æœ‰ç›¸å…³ç±»å‹
â”œâ”€â”€ constants.ts                            # âš™ï¸ æ¨¡å—å¸¸é‡é…ç½® - å¯¼å‡ºæ‰€æœ‰ç›¸å…³å¸¸é‡
â”œâ”€â”€ README.md                               # ğŸ“– æ¨¡å—æ–‡æ¡£ - åŒ…å«æ‰€æœ‰é¡µé¢è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ  ä¸»é¡µé¢å±‚ (Main Page)
â”‚   â”œâ”€â”€ MainPage/                           # ğŸ“± æ¶ˆæ¯ä¸»é¡µé¢
â”‚   â”‚   â”œâ”€â”€ index.tsx                       # ä¸»é¡µé¢å®ç° (å…«æ®µå¼ç»“æ„)
â”‚   â”‚   â”œâ”€â”€ types.ts                        # ä¸»é¡µé¢ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ constants.ts                    # ä¸»é¡µé¢å¸¸é‡é…ç½®
â”‚   â”‚   â”œâ”€â”€ styles.ts                       # ä¸»é¡µé¢æ ·å¼å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ README.md                       # ä¸»é¡µé¢æ–‡æ¡£
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ components/                     # é¡µé¢åŒºåŸŸç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ CategoryArea/               # âœ… 4å®«æ ¼åˆ†ç±»åŒºåŸŸ
â”‚   â”‚       â”‚   â”œâ”€â”€ index.tsx               # ğŸ¯ åŒºåŸŸç»„ä»¶å®ç° (å…«æ®µå¼)
â”‚   â”‚       â”‚   â”œâ”€â”€ types.ts                # åŒºåŸŸç±»å‹å®šä¹‰
â”‚   â”‚       â”‚   â”œâ”€â”€ constants.ts            # åŒºåŸŸå¸¸é‡é…ç½®
â”‚   â”‚       â”‚   â””â”€â”€ README.md               # åŒºåŸŸæ–‡æ¡£
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ ConversationArea/           # âœ… å¯¹è¯åˆ—è¡¨åŒºåŸŸ
â”‚   â”‚       â”‚   â”œâ”€â”€ index.tsx               # ğŸ¯ åŒºåŸŸç»„ä»¶å®ç° (å…«æ®µå¼)
â”‚   â”‚       â”‚   â”œâ”€â”€ types.ts                # åŒºåŸŸç±»å‹å®šä¹‰
â”‚   â”‚       â”‚   â”œâ”€â”€ constants.ts            # åŒºåŸŸå¸¸é‡é…ç½®
â”‚   â”‚       â”‚   â””â”€â”€ README.md               # åŒºåŸŸæ–‡æ¡£
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ NavigationArea/             # âœ… å¯¼èˆªæ åŒºåŸŸ
â”‚   â”‚           â”œâ”€â”€ index.tsx               # ğŸ¯ åŒºåŸŸç»„ä»¶å®ç° (å…«æ®µå¼)
â”‚   â”‚           â””â”€â”€ README.md               # åŒºåŸŸæ–‡æ¡£
â”‚   â”‚
â”œâ”€â”€ ğŸ“„ å­é¡µé¢å±‚ (Sub Pages)
â”‚   â”œâ”€â”€ LikesPage/                          # èµå’Œæ”¶è—æ¶ˆæ¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ index.tsx                       # é¡µé¢å®ç° (å…«æ®µå¼)
â”‚   â”‚   â”œâ”€â”€ types.ts                        # é¡µé¢ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ constants.ts                    # é¡µé¢å¸¸é‡é…ç½®
â”‚   â”‚   â”œâ”€â”€ styles.ts                       # é¡µé¢æ ·å¼å®šä¹‰
â”‚   â”‚   â””â”€â”€ README.md                       # é¡µé¢æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ CommentsPage/                       # è¯„è®ºæ¶ˆæ¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ index.tsx                       # é¡µé¢å®ç° (å…«æ®µå¼)
â”‚   â”‚   â”œâ”€â”€ types.ts                        # é¡µé¢ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ constants.ts                    # é¡µé¢å¸¸é‡é…ç½®
â”‚   â”‚   â”œâ”€â”€ styles.ts                       # é¡µé¢æ ·å¼å®šä¹‰
â”‚   â”‚   â””â”€â”€ README.md                       # é¡µé¢æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ FollowersPage/                      # ç²‰ä¸æ¶ˆæ¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ index.tsx                       # é¡µé¢å®ç° (å…«æ®µå¼)
â”‚   â”‚   â”œâ”€â”€ types.ts                        # é¡µé¢ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ constants.ts                    # é¡µé¢å¸¸é‡é…ç½®
â”‚   â”‚   â”œâ”€â”€ styles.ts                       # é¡µé¢æ ·å¼å®šä¹‰
â”‚   â”‚   â””â”€â”€ README.md                       # é¡µé¢æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ NotificationsPage/                  # ç³»ç»Ÿé€šçŸ¥é¡µé¢
â”‚   â”‚   â”œâ”€â”€ index.tsx                       # é¡µé¢å®ç° (å…«æ®µå¼)
â”‚   â”‚   â”œâ”€â”€ types.ts                        # é¡µé¢ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ constants.ts                    # é¡µé¢å¸¸é‡é…ç½®
â”‚   â”‚   â”œâ”€â”€ styles.ts                       # é¡µé¢æ ·å¼å®šä¹‰
â”‚   â”‚   â””â”€â”€ README.md                       # é¡µé¢æ–‡æ¡£
â”‚   â”‚
â”‚   â””â”€â”€ ChatPage/                           # ç§èŠå¯¹è¯é¡µé¢
â”‚       â”œâ”€â”€ index.tsx                       # é¡µé¢å®ç° (å…«æ®µå¼)
â”‚       â”œâ”€â”€ types.ts                        # é¡µé¢ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ constants.ts                    # é¡µé¢å¸¸é‡é…ç½®
â”‚       â”œâ”€â”€ styles.ts                       # é¡µé¢æ ·å¼å®šä¹‰
â”‚       â””â”€â”€ README.md                       # é¡µé¢æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ”§ å…±äº«ç»„ä»¶å±‚ (Shared Components - æ¨¡å—å†…)
â”‚   â””â”€â”€ SharedComponents/                   # æ¶ˆæ¯æ¨¡å—å†…å…±äº«ç»„ä»¶
â”‚       â”œâ”€â”€ MessageItem/                    # ğŸ“‹ æ¶ˆæ¯åˆ—è¡¨é¡¹ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ index.tsx                   # ğŸ¯ ç»„ä»¶å®ç° (å…«æ®µå¼ï¼ŒåŸºäºButton.tsxæ¨¡æ¿)
â”‚       â”‚   â”œâ”€â”€ types.ts                    # ç»„ä»¶ç±»å‹å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ constants.ts                # ç»„ä»¶å¸¸é‡é…ç½®
â”‚       â”‚   â””â”€â”€ README.md                   # ç»„ä»¶æ–‡æ¡£
â”‚       â”‚
â”‚       â”œâ”€â”€ UserAvatar/                     # ğŸ‘¤ ç”¨æˆ·å¤´åƒç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ index.tsx                   # ğŸ¯ ç»„ä»¶å®ç° (å…«æ®µå¼)
â”‚       â”‚   â”œâ”€â”€ types.ts                    # ç»„ä»¶ç±»å‹å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ constants.ts                # ç»„ä»¶å¸¸é‡é…ç½®
â”‚       â”‚   â””â”€â”€ README.md                   # ç»„ä»¶æ–‡æ¡£
â”‚       â”‚
â”‚       â”œâ”€â”€ ChatBubble/                     # ğŸ’¬ æ¶ˆæ¯æ°”æ³¡ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ index.tsx                   # ğŸ¯ ç»„ä»¶å®ç° (å…«æ®µå¼)
â”‚       â”‚   â”œâ”€â”€ types.ts                    # ç»„ä»¶ç±»å‹å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ constants.ts                # ç»„ä»¶å¸¸é‡é…ç½®
â”‚       â”‚   â””â”€â”€ README.md                   # ç»„ä»¶æ–‡æ¡£
â”‚       â”‚
â”‚       â”œâ”€â”€ SwipeActions/                   # ğŸ‘† æ»‘åŠ¨æ“ä½œç»„ä»¶ (ç§»åŠ¨ç«¯å¿…éœ€)
â”‚       â”‚   â”œâ”€â”€ index.tsx                   # ğŸ¯ ç»„ä»¶å®ç° (å…«æ®µå¼)
â”‚       â”‚   â”œâ”€â”€ types.ts                    # ç»„ä»¶ç±»å‹å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ constants.ts                # ç»„ä»¶å¸¸é‡é…ç½®
â”‚       â”‚   â””â”€â”€ README.md                   # ç»„ä»¶æ–‡æ¡£
â”‚       â”‚
â”‚       â””â”€â”€ index.ts                        # ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰å…±äº«ç»„ä»¶
â”‚
â”œâ”€â”€ ğŸŒ APIæ¥å£å±‚ (Module API) - ç®€åŒ–è®¾è®¡
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ messagesApi.ts                  # æ¶ˆæ¯ä¸»æ¥å£ (åŸºäºç°æœ‰homepageApiæ¨¡å¼)
â”‚       â”œâ”€â”€ chatApi.ts                      # èŠå¤©æ¥å£
â”‚       â”œâ”€â”€ notificationsApi.ts             # é€šçŸ¥æ¥å£
â”‚       â””â”€â”€ index.ts                        # APIç»Ÿä¸€å¯¼å‡º
â”‚
â”œâ”€â”€ ğŸ“Š çŠ¶æ€ç®¡ç†å±‚ (State Management) - ç®€åŒ–è®¾è®¡
â”‚   â””â”€â”€ stores/
â”‚       â”œâ”€â”€ messagesStore.ts                # æ¶ˆæ¯ä¸»çŠ¶æ€ (åŸºäºç°æœ‰homepageStoreæ¨¡å¼)
â”‚       â”œâ”€â”€ chatStore.ts                    # èŠå¤©çŠ¶æ€
â”‚       â”œâ”€â”€ webSocketStore.ts               # WebSocketè¿æ¥çŠ¶æ€
â”‚       â””â”€â”€ index.ts                        # Storeç»Ÿä¸€å¯¼å‡º
â”‚
â””â”€â”€ MESSAGES_MODULE_ARCHITECTURE.md         # ğŸ“– æœ¬æ–‡æ¡£
```

---

## ğŸ§­ **è·¯ç”±æ˜ å°„ä¸å‘½åè§„èŒƒ**

### ğŸ“± **Expo Routerå±‚ - Screenå‘½å**

```typescript
// è·¯ç”±æ–‡ä»¶ â†’ URLè·¯å¾„ â†’ Screenç»„ä»¶åç§° â†’ ä¸šåŠ¡ç»„ä»¶

app/(tabs)/messages/index.tsx
â†’ /(tabs)/messages 
â†’ MessagesScreen 
â†’ <MainPage />

app/(tabs)/messages/likes.tsx
â†’ /(tabs)/messages/likes
â†’ LikesScreen
â†’ <LikesPage />

app/(tabs)/messages/comments.tsx
â†’ /(tabs)/messages/comments
â†’ CommentsScreen
â†’ <CommentsPage />

app/(tabs)/messages/followers.tsx
â†’ /(tabs)/messages/followers
â†’ FollowersScreen
â†’ <FollowersPage />

app/(tabs)/messages/notifications.tsx
â†’ /(tabs)/messages/notifications
â†’ NotificationsScreen
â†’ <NotificationsPage />

app/(tabs)/messages/chat/[conversationId].tsx
â†’ /(tabs)/messages/chat/:conversationId
â†’ ChatScreen
â†’ <ChatPage conversationId={params.conversationId} />
```

### ğŸ¯ **ä¸šåŠ¡ç»„ä»¶å±‚ - Page/Areaå‘½å**

```typescript
// ä¸šåŠ¡ç»„ä»¶ä½ç½® â†’ ç»„ä»¶åç§° â†’ ç»„ä»¶ç±»å‹

src/features/Messages/MainPage/
â†’ MainPage
â†’ ä¸šåŠ¡ä¸»é¡µé¢ (Pageå±‚)

src/features/Messages/MainPage/components/CategoryArea/
â†’ CategoryArea
â†’ é¡µé¢åŒºåŸŸç»„ä»¶ (Areaå±‚)

src/features/Messages/SharedComponents/MessageItem/
â†’ MessageItem
â†’ æ¨¡å—å†…å…±äº«ç»„ä»¶ (Componentå±‚)

src/components/ui/Button/
â†’ Button
â†’ å…¨å±€å…±äº«ç»„ä»¶ (Componentå±‚)
```

### ğŸ“ **å‘½åè§„èŒƒè¯´æ˜**

| å±‚çº§ | å‘½ååç¼€ | ç”¨é€” | ç¤ºä¾‹ | æ–‡ä»¶ä½ç½® |
|------|----------|------|------|---------|
| **Route** | `Screen` | Expo Routerè·¯ç”±é€‚é…å™¨ | `MessagesScreen` | `app/(tabs)/messages/` |
| **Business** | `Page` | ä¸šåŠ¡ä¸»é¡µé¢ç»„ä»¶ | `MainPage` | `src/features/Messages/` |
| **Region** | `Area` | é¡µé¢åŠŸèƒ½åŒºåŸŸç»„ä»¶ | `CategoryArea` | `Page/components/` |
| **Shared** | `Component` | æ¨¡å—å†…å…±äº«ç»„ä»¶ | `MessageItem` | `SharedComponents/` |
| **Global** | `Component` | å…¨å±€å…±äº«ç»„ä»¶ | `Button` | `src/components/` |

---

## ğŸ¯ **MainPageä¸»é¡µé¢æ¶æ„**

### ğŸ“ **å…«æ®µå¼ç»“æ„æ ‡å‡†** (åŸºäºç°æœ‰Button.tsxæ¨¡æ¿)

æ‰€æœ‰ `index.tsx` æ–‡ä»¶å¿…é¡»éµå¾ªä»¥ä¸‹å…«æ®µå¼ç»“æ„ï¼š

```typescript
// #region 1. File Banner & TOC
/**
 * MainPage - æ¶ˆæ¯æ¨¡å—ä¸»é¡µé¢
 * 
 * åŠŸèƒ½æè¿°ï¼šæ¶ˆæ¯ä¸»é¡µé¢ï¼ŒåŒ…å«4å®«æ ¼åˆ†ç±»ã€å¯¹è¯åˆ—è¡¨ã€å¯¼èˆªæ 
 * 
 * TOC (å¿«é€Ÿè·³è½¬):
 * [1] Imports
 * [2] Types & Schema  
 * [3] Constants & Config
 * [4] Utils & Helpers
 * [5] State Management
 * [6] Domain Logic
 * [7] UI Components & Rendering
 * [8] Exports
 */
// #endregion

// #region 2. Imports
// React/æ¡†æ¶æ ¸å¿ƒå¯¼å…¥
import React, { useCallback, useEffect, useMemo, useRef } from 'react';
import { View, ScrollView, StyleSheet, Platform } from 'react-native';
import { useRouter, useFocusEffect } from 'expo-router';

// ç¬¬ä¸‰æ–¹åº“å¯¼å…¥
// (æŒ‰éœ€å¯¼å…¥)

// å†…éƒ¨æ¨¡å—å¯¼å…¥
import { CategoryArea } from './components/CategoryArea';
import { ConversationArea } from './components/ConversationArea';
import { NavigationArea } from './components/NavigationArea';
import { useMessagesStore } from '../../stores/messagesStore';
import type { MainPageProps } from './types';
import { ROUTES, MESSAGES_CONFIG } from './constants';
// #endregion

// #region 3. Types & Schema
// Propsæ¥å£å®šä¹‰ (åœ¨types.tsä¸­å®šä¹‰ï¼Œè¿™é‡Œå¯é€‰æ‹©æ€§é‡æ–°å¯¼å‡º)
// æœ¬åœ°ç±»å‹å®šä¹‰ (å¦‚æœtypes.tsä¸å¤Ÿç”¨)
// #endregion

// #region 4. Constants & Config
// æœ¬åœ°å¸¸é‡ (å¦‚æœconstants.tsä¸å¤Ÿç”¨)
// é¡µé¢é…ç½®é¡¹
// #endregion

// #region 5. Utils & Helpers
// ğŸ¯ æœ¬åœ°å·¥å…·å‡½æ•° (é›†ä¸­ç®¡ç†ï¼Œé¿å…åˆ›å»ºç‹¬ç«‹æ–‡ä»¶)
// æ ¼å¼åŒ–å‡½æ•°ã€è®¡ç®—å‡½æ•°ã€æ˜¾ç¤ºå·¥å…·ç­‰
// #endregion

// #region 6. State Management
// ğŸ¯ çŠ¶æ€ç®¡ç†Hook (é›†ä¸­ç®¡ç†ï¼Œé¿å…åˆ›å»ºç‹¬ç«‹hooksæ–‡ä»¶)
const useMainPageState = () => {
  // é›†æˆZustand stores
  const messagesStore = useMessagesStore();
  
  // æœ¬åœ°çŠ¶æ€
  const [loading, setLoading] = React.useState(false);
  const [refreshing, setRefreshing] = React.useState(false);
  
  // è®¡ç®—å±æ€§
  const unreadCount = useMemo(() => {
    // è®¡ç®—æœªè¯»æ¶ˆæ¯æ•°é‡
    return messagesStore.conversations.filter(c => !c.isRead).length;
  }, [messagesStore.conversations]);
  
  return {
    ...messagesStore,
    loading,
    setLoading,
    refreshing,
    setRefreshing,
    unreadCount
  };
};

const useMainPageLogic = () => {
  // ä¸šåŠ¡é€»è¾‘å®ç°
  // åˆå§‹åŒ–ã€äº‹ä»¶å¤„ç†ç­‰
};
// #endregion

// #region 7. Domain Logic
// ğŸ¯ äº‹ä»¶å¤„ç†å‡½æ•° (é›†ä¸­ç®¡ç†ï¼Œé¿å…åˆ›å»ºç‹¬ç«‹æ–‡ä»¶)
// ä¸šåŠ¡é€»è¾‘å‡½æ•°ã€APIè°ƒç”¨é€»è¾‘
// #endregion

// #region 8. UI Components & Rendering
// ä¸»æ¸²æŸ“ç»„ä»¶
const MainPage: React.FC<MainPageProps> = (props) => {
  const state = useMainPageState();
  const logic = useMainPageLogic();
  
  return (
    <View style={styles.container}>
      <NavigationArea />
      <ScrollView>
        <CategoryArea />
        <ConversationArea />
      </ScrollView>
    </View>
  );
};

// æ ·å¼å®šä¹‰
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#FFFFFF',
  },
  // ...å…¶ä»–æ ·å¼
});
// #endregion

// #region 9. Exports
export default MainPage;
export type { MainPageProps };
// #endregion
```

### ğŸ”„ **æ ¸å¿ƒHookç»„åˆæ¨¡å¼** (åŸºäºç°æœ‰Homepageæ¨¡å¼)

```typescript
// å‚è€ƒç°æœ‰Homepage/MainPageçš„Hookç»„åˆæ¨¡å¼
useMainPageState() {
  // é›†æˆå¤šä¸ªZustand stores
  const messages = useMessagesStore();
  const user = useUserStore();
  const config = useConfigStore();
  
  // æœ¬åœ°çŠ¶æ€ç®¡ç†
  const [loading, setLoading] = useState(false);
  
  // è®¡ç®—å±æ€§
  const unreadCount = useMemo(() => {...}, [messages]);
  
  return { messages, user, config, loading, unreadCount };
}

useMainPageLogic() {
  const state = useMainPageState();
  const router = useRouter();
  
  // åˆå§‹åŒ–é¡µé¢æ•°æ®
  useEffect(() => {
    loadInitialData();
  }, []);
  
  // é¡µé¢ç„¦ç‚¹å¤„ç†
  useFocusEffect(
    useCallback(() => {
      refreshData();
    }, [])
  );
  
  // äº‹ä»¶å¤„ç†å‡½æ•°
  const handleCategoryPress = useCallback((type: string) => {
    router.push(`/messages/${type}`);
  }, [router]);
  
  return { handleCategoryPress, refreshData };
}
```

---

## ğŸ§© **åŒºåŸŸç»„ä»¶è¯¦è§£**

### ğŸ” **CategoryArea - 4å®«æ ¼åˆ†ç±»åŒºåŸŸ**

```typescript
èŒè´£ï¼šæ¶ˆæ¯åˆ†ç±»å…¥å£ + æœªè¯»è§’æ ‡ + ç‚¹å‡»è·³è½¬
ç»„ä»¶ï¼š4ä¸ªåˆ†ç±»å¡ç‰‡ï¼ˆèµå’Œæ”¶è—ã€è¯„è®ºã€ç²‰ä¸ã€ç³»ç»Ÿé€šçŸ¥ï¼‰
Props: { onCategoryPress, unreadCounts, style? }
ç‰¹æ€§ï¼šç½‘æ ¼å¸ƒå±€ã€æœªè¯»è§’æ ‡ã€è§¦è§‰åé¦ˆã€ç‚¹å‡»åŠ¨ç”»
å¯¼èˆªï¼šâ†’ likes.tsx, comments.tsx, followers.tsx, notifications.tsx
è®¾è®¡å‚è€ƒï¼šç°æœ‰Homepageçš„ServiceGridArea
```

### ğŸ“‹ **ConversationArea - å¯¹è¯åˆ—è¡¨åŒºåŸŸ**

```typescript
èŒè´£ï¼šæœ€è¿‘å¯¹è¯åˆ—è¡¨ + æ»‘åŠ¨æ“ä½œ + é•¿æŒ‰èœå•
ç»„ä»¶ï¼šMessageItemåˆ—è¡¨ï¼ˆåŸºäºFlatListè™šæ‹ŸåŒ–ï¼‰
Props: { conversations, onConversationPress, onDelete, style? }
ç‰¹æ€§ï¼šFlatListè™šæ‹ŸåŒ–ã€ä¸‹æ‹‰åˆ·æ–°ã€æ»‘åŠ¨åˆ é™¤ã€é•¿æŒ‰èœå•
å¯¼èˆªï¼šâ†’ chat/[conversationId].tsx
è®¾è®¡å‚è€ƒï¼šç°æœ‰Homepageçš„UserListArea
```

### ğŸ§­ **NavigationArea - å¯¼èˆªæ åŒºåŸŸ**

```typescript
èŒè´£ï¼šé¡µé¢æ ‡é¢˜ + æœç´¢æŒ‰é’® + è®¾ç½®æŒ‰é’®
ç»„ä»¶ï¼šå¯¼èˆªæ ï¼ˆåŸºäºç°æœ‰NavigationBaræ¨¡å¼ï¼‰
Props: { title, onSearchPress, onSettingsPress, style? }
ç‰¹æ€§ï¼šå®‰å…¨åŒºåŸŸé€‚é…ã€é€æ˜èƒŒæ™¯ã€é˜´å½±æ•ˆæœ
å¯¼èˆªï¼šâ†’ search.tsx (å¯é€‰), settings.tsx (å¯é€‰)
è®¾è®¡å‚è€ƒï¼šç°æœ‰Homepageçš„TopFunctionArea
```

---

## ğŸ”§ **å…±äº«ç»„ä»¶è®¾è®¡** (ç®€åŒ–ç‰ˆ)

### ğŸ“‹ **MessageItem - æ¶ˆæ¯åˆ—è¡¨é¡¹ç»„ä»¶** (åŸºäºButton.tsxå…«æ®µå¼æ¨¡æ¿)

#### ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**
- ç»Ÿä¸€çš„æ¶ˆæ¯åˆ—è¡¨é¡¹UIç»“æ„
- æ”¯æŒå¯¹è¯ã€é€šçŸ¥ç­‰å¤šç§æ¶ˆæ¯ç±»å‹
- å†…ç½®æ»‘åŠ¨æ“ä½œå’Œé•¿æŒ‰èœå•
- æ”¯æŒæœªè¯»çŠ¶æ€å’Œæ—¶é—´æ˜¾ç¤º

#### ğŸ“‹ **Propsæ¥å£è®¾è®¡** (ç®€åŒ–ç‰ˆ - éµå¾ªYAGNIåŸåˆ™)

```typescript
interface MessageItemProps {
  // åŸºç¡€æ•°æ®
  id: string
  type: 'conversation' | 'notification'
  
  // ç”¨æˆ·ä¿¡æ¯
  avatar: string
  title: string
  subtitle: string
  
  // çŠ¶æ€ä¿¡æ¯
  timestamp: number
  isRead: boolean
  unreadCount?: number
  
  // äº¤äº’é…ç½®
  onPress: () => void
  onLongPress?: () => void
  onDelete?: () => void
  
  // æ ·å¼é…ç½®
  style?: StyleProp<ViewStyle>
}
```

#### ğŸ¨ **è®¾è®¡è§„èŒƒ**
- **å®¹å™¨**: é«˜åº¦80pxï¼Œç™½è‰²èƒŒæ™¯ï¼Œåº•éƒ¨1pxåˆ†éš”çº¿
- **å¸ƒå±€**: å·¦ä¾§å¤´åƒ(48x48px) + ä¸­å¤®ä¿¡æ¯åŒºåŸŸ + å³ä¾§æ—¶é—´å’Œæœªè¯»è§’æ ‡
- **å­—ä½“**: æ ‡é¢˜16spç²—ä½“ï¼Œå‰¯æ ‡é¢˜14spå¸¸è§„ï¼Œæ—¶é—´12sp
- **é¢œè‰²**: æœªè¯»æ¶ˆæ¯åŠ ç²—æ˜¾ç¤ºï¼Œå·²è¯»æ¶ˆæ¯å¸¸è§„æ˜¾ç¤º
- **äº¤äº’**: ç‚¹å‡»è¿›å…¥è¯¦æƒ…ï¼Œæ»‘åŠ¨æ˜¾ç¤ºåˆ é™¤ï¼Œé•¿æŒ‰æ˜¾ç¤ºèœå•

#### ğŸ”„ **å…«æ®µå¼å®ç°ç»“æ„**

```typescript
// #region 1. File Banner & TOC
/**
 * MessageItem - æ¶ˆæ¯åˆ—è¡¨é¡¹ç»„ä»¶
 * åŸºäºButton.tsxçš„å…«æ®µå¼æ¨¡æ¿å®ç°
 */
// #endregion

// #region 2. Imports
import React, { useRef, useState, useCallback } from 'react';
import { View, Text, Image, StyleSheet, Animated, TouchableWithoutFeedback } from 'react-native';
// ... å…¶ä»–å¯¼å…¥
// #endregion

// #region 3. Types & Schema
// Propsç±»å‹å®šä¹‰
// #endregion

// #region 4. Constants & Config
const COLORS = {
  background: '#FFFFFF',
  textPrimary: '#1F2937',
  textSecondary: '#6B7280',
  unreadBadge: '#EF4444',
  border: '#F3F4F6',
};

const SIZES = {
  avatarSize: 48,
  height: 80,
  fontSize: { title: 16, subtitle: 14, time: 12 },
};
// #endregion

// #region 5. Utils & Helpers
// æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
const formatTime = (timestamp: number): string => {
  const now = Date.now();
  const diff = now - timestamp;
  
  if (diff < 60000) return 'åˆšåˆš';
  if (diff < 3600000) return `${Math.floor(diff / 60000)}åˆ†é’Ÿå‰`;
  if (diff < 86400000) return `${Math.floor(diff / 3600000)}å°æ—¶å‰`;
  return new Date(timestamp).toLocaleDateString();
};
// #endregion

// #region 6. State Management
// æ¶ˆæ¯é¡¹çŠ¶æ€ç®¡ç†Hook
const useMessageItemState = (props: MessageItemProps) => {
  const [pressed, setPressed] = useState(false);
  const animatedValue = useRef(new Animated.Value(1)).current;
  
  // æŒ‰å‹åŠ¨ç”»å¤„ç†
  const handlePressIn = useCallback(() => {
    setPressed(true);
    Animated.timing(animatedValue, {
      toValue: 0.95,
      duration: 100,
      useNativeDriver: true,
    }).start();
  }, [animatedValue]);
  
  const handlePressOut = useCallback(() => {
    setPressed(false);
    Animated.spring(animatedValue, {
      toValue: 1,
      useNativeDriver: true,
    }).start();
  }, [animatedValue]);
  
  return { pressed, animatedValue, handlePressIn, handlePressOut };
};
// #endregion

// #region 7. Domain Logic
// äº‹ä»¶å¤„ç†é€»è¾‘
// #endregion

// #region 8. UI Components & Rendering
const MessageItem: React.FC<MessageItemProps> = (props) => {
  const { id, avatar, title, subtitle, timestamp, isRead, unreadCount, onPress } = props;
  const state = useMessageItemState(props);
  
  return (
    <TouchableWithoutFeedback
      onPressIn={state.handlePressIn}
      onPressOut={state.handlePressOut}
      onPress={onPress}
    >
      <Animated.View style={[
        styles.container,
        { transform: [{ scale: state.animatedValue }] }
      ]}>
        {/* å¤´åƒ */}
        <Image source={{ uri: avatar }} style={styles.avatar} />
        
        {/* ä¿¡æ¯åŒºåŸŸ */}
        <View style={styles.contentArea}>
          <Text style={[styles.title, !isRead && styles.unreadTitle]}>
            {title}
          </Text>
          <Text style={styles.subtitle} numberOfLines={1}>
            {subtitle}
          </Text>
        </View>
        
        {/* å³ä¾§åŒºåŸŸ */}
        <View style={styles.rightArea}>
          <Text style={styles.time}>{formatTime(timestamp)}</Text>
          {unreadCount && unreadCount > 0 && (
            <View style={styles.unreadBadge}>
              <Text style={styles.unreadText}>
                {unreadCount > 99 ? '99+' : unreadCount}
              </Text>
            </View>
          )}
        </View>
      </Animated.View>
    </TouchableWithoutFeedback>
  );
};

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    height: SIZES.height,
    paddingHorizontal: 16,
    backgroundColor: COLORS.background,
    borderBottomWidth: 1,
    borderBottomColor: COLORS.border,
  },
  avatar: {
    width: SIZES.avatarSize,
    height: SIZES.avatarSize,
    borderRadius: SIZES.avatarSize / 2,
    marginRight: 12,
  },
  contentArea: {
    flex: 1,
    justifyContent: 'center',
  },
  title: {
    fontSize: SIZES.fontSize.title,
    color: COLORS.textPrimary,
    marginBottom: 4,
  },
  unreadTitle: {
    fontWeight: '600',
  },
  subtitle: {
    fontSize: SIZES.fontSize.subtitle,
    color: COLORS.textSecondary,
  },
  rightArea: {
    alignItems: 'flex-end',
  },
  time: {
    fontSize: SIZES.fontSize.time,
    color: COLORS.textSecondary,
    marginBottom: 4,
  },
  unreadBadge: {
    backgroundColor: COLORS.unreadBadge,
    borderRadius: 10,
    minWidth: 20,
    height: 20,
    paddingHorizontal: 6,
    justifyContent: 'center',
    alignItems: 'center',
  },
  unreadText: {
    color: '#FFFFFF',
    fontSize: 10,
    fontWeight: '600',
  },
});
// #endregion

// #region 9. Exports
export default MessageItem;
export type { MessageItemProps };
// #endregion
```

---

### ğŸ‘¤ **UserAvatar - ç”¨æˆ·å¤´åƒç»„ä»¶**

#### ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**
- æ”¯æŒå¤šç§å°ºå¯¸çš„åœ†å½¢å¤´åƒæ˜¾ç¤º
- åœ¨çº¿çŠ¶æ€æŒ‡ç¤ºå™¨
- æœªè¯»æ¶ˆæ¯è§’æ ‡
- æ“ä½œç±»å‹å›¾æ ‡overlay

#### ğŸ“‹ **Propsæ¥å£è®¾è®¡** (ç®€åŒ–ç‰ˆ)

```typescript
interface UserAvatarProps {
  // ç”¨æˆ·ä¿¡æ¯
  avatar: string
  size?: 'small' | 'medium' | 'large' | number // 24/36/48px æˆ–è‡ªå®šä¹‰
  
  // çŠ¶æ€æŒ‡ç¤º
  showOnlineStatus?: boolean
  isOnline?: boolean
  unreadCount?: number
  
  // äº¤äº’é…ç½®
  onPress?: () => void
  
  // æ ·å¼é…ç½®
  style?: StyleProp<ViewStyle>
}
```

---

### ğŸ’¬ **ChatBubble - æ¶ˆæ¯æ°”æ³¡ç»„ä»¶**

#### ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**
- å‘é€å’Œæ¥æ”¶æ¶ˆæ¯çš„æ°”æ³¡æ ·å¼
- æ”¯æŒæ–‡å­—ã€å›¾ç‰‡æ¶ˆæ¯ç±»å‹
- æ¶ˆæ¯çŠ¶æ€æŒ‡ç¤ºå™¨

#### ğŸ“‹ **Propsæ¥å£è®¾è®¡** (ç®€åŒ–ç‰ˆ)

```typescript
interface ChatBubbleProps {
  // æ¶ˆæ¯æ•°æ®
  id: string
  content: string
  timestamp: number
  
  // æ˜¾ç¤ºé…ç½®
  isSelf: boolean // æ˜¯å¦ä¸ºå½“å‰ç”¨æˆ·å‘é€
  
  // çŠ¶æ€é…ç½®
  status?: 'sending' | 'sent' | 'failed'
  
  // äº¤äº’é…ç½®
  onPress?: () => void
  onLongPress?: () => void
  onResend?: () => void // å¤±è´¥æ¶ˆæ¯é‡å‘
}
```

---

### ğŸ‘† **SwipeActions - æ»‘åŠ¨æ“ä½œç»„ä»¶** (ç§»åŠ¨ç«¯å¿…éœ€)

#### ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**
- åˆ—è¡¨é¡¹æ»‘åŠ¨æ“ä½œ
- è‡ªå®šä¹‰æ“ä½œæŒ‰é’®
- æ‰‹åŠ¿è¯†åˆ«å’ŒåŠ¨ç”»

#### ğŸ“‹ **Propsæ¥å£è®¾è®¡**

```typescript
interface SwipeActionsProps {
  children: ReactNode
  
  // å³æ»‘æ“ä½œ
  rightActions?: Array<{
    text: string
    color: string
    onPress: () => void
  }>
  
  // å·¦æ»‘æ“ä½œ
  leftActions?: Array<{
    text: string
    color: string
    onPress: () => void
  }>
  
  // é…ç½®
  closeOnPress?: boolean
}
```

---

## ğŸ“Š **çŠ¶æ€ç®¡ç†æ¶æ„** (åŸºäºç°æœ‰homepageStoreæ¨¡å¼)

### ğŸ¯ **ç®€åŒ–çš„Storeè®¾è®¡**

#### ğŸ  **messagesStore - æ¶ˆæ¯ä¸»çŠ¶æ€**

```typescript
// å‚è€ƒç°æœ‰homepageStoreçš„ç®€åŒ–è®¾è®¡
interface MessagesState {
  // å¯¹è¯æ•°æ®
  conversations: Conversation[]
  
  // æœªè¯»ç»Ÿè®¡
  unreadCount: number
  
  // åŠ è½½çŠ¶æ€
  loading: boolean
  
  // é”™è¯¯çŠ¶æ€
  error: string | null
  
  // Actions
  loadConversations: () => Promise<void>
  markAsRead: (conversationId: string) => void
  deleteConversation: (conversationId: string) => void
  refreshConversations: () => Promise<void>
}

// é¿å…è¿‡åº¦è®¾è®¡
âŒ å¤æ‚è®¾è®¡: loading: Record<string, boolean>
âŒ å¤æ‚è®¾è®¡: errors: Record<string, string>
âœ… ç®€å•è®¾è®¡: loading: boolean, error: string | null
```

#### ğŸ’¬ **chatStore - èŠå¤©çŠ¶æ€**

```typescript
interface ChatState {
  // å½“å‰èŠå¤©
  currentChat: Chat | null
  
  // æ¶ˆæ¯åˆ—è¡¨
  messages: Message[]
  
  // è¾“å…¥çŠ¶æ€
  inputText: string
  
  // åŠ è½½çŠ¶æ€
  loading: boolean
  
  // Actions
  loadMessages: (chatId: string) => Promise<void>
  sendMessage: (content: string) => Promise<void>
  setInputText: (text: string) => void
}
```

#### ğŸ”Œ **webSocketStore - WebSocketè¿æ¥çŠ¶æ€**

```typescript
interface WebSocketState {
  // è¿æ¥çŠ¶æ€
  connected: boolean
  
  // é‡è¿æ¬¡æ•°
  reconnectAttempts: number
  
  // Actions
  connect: () => void
  disconnect: () => void
  sendEvent: (event: string, data: any) => void
}
```

### ğŸ”— **Storeé›†æˆæ¨¡å¼** (å‚è€ƒç°æœ‰Homepage)

```typescript
// MainPageä¸­çš„çŠ¶æ€é›†æˆ
const useMainPageState = () => {
  const messages = useMessagesStore();
  const user = useUserStore(); // å¤ç”¨ç°æœ‰userStore
  const config = useConfigStore(); // å¤ç”¨ç°æœ‰configStore
  
  return { messages, user, config };
};
```

---

## ğŸŒ **APIæ¥å£è®¾è®¡** (åŸºäºç°æœ‰homepageApiæ¨¡å¼)

### ğŸ¯ **ç®€åŒ–çš„RESTful APIè®¾è®¡**

#### ğŸ“¡ **messagesApi - æ¶ˆæ¯ä¸»æ¥å£**

```typescript
// å‚è€ƒç°æœ‰homepageApiçš„ç®€åŒ–è®¾è®¡
export const messagesApi = {
  // è·å–å¯¹è¯åˆ—è¡¨
  getConversations: () => 
    api.get('/api/conversations'),
  
  // æ ‡è®°ä¸ºå·²è¯»
  markAsRead: (conversationId: string) => 
    api.patch(`/api/conversations/${conversationId}/read`),
  
  // åˆ é™¤å¯¹è¯
  deleteConversation: (conversationId: string) => 
    api.delete(`/api/conversations/${conversationId}`),
  
  // è·å–æœªè¯»è®¡æ•°
  getUnreadCount: () => 
    api.get('/api/conversations/unread-count'),
};
```

#### ğŸ’¬ **chatApi - èŠå¤©æ¥å£**

```typescript
export const chatApi = {
  // è·å–èŠå¤©æ¶ˆæ¯
  getMessages: (chatId: string, page: number = 1) => 
    api.get(`/api/chats/${chatId}/messages`, { params: { page } }),
  
  // å‘é€æ¶ˆæ¯
  sendMessage: (chatId: string, content: string) => 
    api.post(`/api/chats/${chatId}/messages`, { content }),
  
  // æ ‡è®°æ¶ˆæ¯å·²è¯»
  markMessagesAsRead: (chatId: string, messageIds: string[]) => 
    api.patch(`/api/chats/${chatId}/messages/read`, { messageIds }),
};
```

#### ğŸ”” **notificationsApi - é€šçŸ¥æ¥å£**

```typescript
export const notificationsApi = {
  // è·å–é€šçŸ¥åˆ—è¡¨
  getNotifications: (type: 'like' | 'comment' | 'follow' | 'system') => 
    api.get(`/api/notifications/${type}`),
  
  // æ¸…ç©ºé€šçŸ¥
  clearNotifications: (type: string) => 
    api.delete(`/api/notifications/${type}`),
};
```

### ğŸ”§ **APIå®¢æˆ·ç«¯ç‰¹æ€§** (åŸºäºç°æœ‰api/client.ts)

```typescript
// å¤ç”¨ç°æœ‰APIå®¢æˆ·ç«¯é…ç½®
- ç»Ÿä¸€é”™è¯¯å¤„ç†
- è‡ªåŠ¨é‡è¯•æœºåˆ¶
- è¯·æ±‚ç¼“å­˜
- è¶…æ—¶é…ç½®
- è¯·æ±‚æ‹¦æˆªå™¨
```

---

## ğŸ”Œ **WebSocketå®æ—¶é€šä¿¡è®¾è®¡**

### ğŸ¯ **Socket.ioé›†æˆæ–¹æ¡ˆ**

#### ğŸ“¡ **è¿æ¥ç®¡ç†**

```typescript
// WebSocketè¿æ¥ç®¡ç†
class WebSocketManager {
  private socket: Socket | null = null;
  private reconnectAttempts = 0;
  private maxReconnectAttempts = 5;
  
  connect() {
    this.socket = io('ws://your-server.com', {
      transports: ['websocket'],
      reconnection: true,
      reconnectionDelay: 1000,
      reconnectionDelayMax: 5000,
    });
    
    this.socket.on('connect', this.handleConnect);
    this.socket.on('disconnect', this.handleDisconnect);
    this.socket.on('message', this.handleMessage);
  }
  
  disconnect() {
    if (this.socket) {
      this.socket.disconnect();
      this.socket = null;
    }
  }
  
  sendMessage(chatId: string, content: string) {
    if (this.socket) {
      this.socket.emit('send_message', { chatId, content });
    }
  }
  
  private handleConnect = () => {
    this.reconnectAttempts = 0;
    // æ›´æ–°webSocketStoreçŠ¶æ€
  };
  
  private handleDisconnect = () => {
    // é‡è¿é€»è¾‘
  };
  
  private handleMessage = (data: any) => {
    // æ›´æ–°chatStoreçŠ¶æ€
  };
}
```

#### ğŸ”„ **äº‹ä»¶å®šä¹‰**

```typescript
// Socketäº‹ä»¶å®šä¹‰
enum SocketEvents {
  // å®¢æˆ·ç«¯å‘é€
  SEND_MESSAGE = 'send_message',
  TYPING_START = 'typing_start',
  TYPING_END = 'typing_end',
  
  // æœåŠ¡ç«¯å‘é€
  NEW_MESSAGE = 'new_message',
  USER_TYPING = 'user_typing',
  MESSAGE_READ = 'message_read',
  USER_ONLINE = 'user_online',
  USER_OFFLINE = 'user_offline',
}
```

---

## ğŸ¨ **æ ·å¼ä¸ä¸»é¢˜ç³»ç»Ÿ** (ç»Ÿä¸€ç°æœ‰é¡¹ç›®é…è‰²)

### ğŸŒˆ **ä¸»é¢˜é…ç½®** (åŸºäºç°æœ‰Buttonç»„ä»¶)

```typescript
// ç»Ÿä¸€ä½¿ç”¨ç°æœ‰é¡¹ç›®çš„ä¸»é¢˜é…ç½®
COLORS: {
  PRIMARY: '#6366F1',      // ä¸»è‰²è°ƒ (ä¸ç°æœ‰Buttonç»Ÿä¸€)
  SECONDARY: '#8B5CF6',    // è¾…åŠ©è‰²
  SUCCESS: '#10B981',      // æˆåŠŸè‰²
  ERROR: '#EF4444',        // é”™è¯¯è‰²
  WARNING: '#F59E0B',      // è­¦å‘Šè‰²
  
  // æ¶ˆæ¯æ¨¡å—ä¸“ç”¨é¢œè‰²
  BACKGROUND: '#FFFFFF',   // èƒŒæ™¯è‰²
  SURFACE: '#F9FAFB',      // è¡¨é¢è‰²
  BORDER: '#E5E7EB',       // è¾¹æ¡†è‰²
  TEXT_PRIMARY: '#1F2937', // ä¸»è¦æ–‡å­—
  TEXT_SECONDARY: '#6B7280', // æ¬¡è¦æ–‡å­—
  UNREAD_BADGE: '#EF4444', // æœªè¯»è§’æ ‡
}

SPACING: { XS: 4, SM: 8, MD: 16, LG: 24, XL: 32, XXL: 48 }
TYPOGRAPHY: { å®Œæ•´çš„å­—ä½“é…ç½®ç³»ç»Ÿ }
```

### ğŸ“ **å“åº”å¼è®¾è®¡** (å¤ç”¨ç°æœ‰responsiveå·¥å…·)

```typescript
// å¤ç”¨ç°æœ‰src/styles/responsive.ts
responsive.scale(size, baseWidth)     // å±å¹•ç¼©æ”¾
responsive.fontSize(size)             // å­—ä½“ç¼©æ”¾  
responsive.width.percent(50)          // ç™¾åˆ†æ¯”å®½åº¦
mediaQuery.tablet(styles)             // å¹³æ¿æ ·å¼
safeArea.top()                        // å®‰å…¨åŒºåŸŸ
```

---

## âš¡ **æ€§èƒ½ä¼˜åŒ–ç­–ç•¥** (åŸºäºç°æœ‰é¡¹ç›®éªŒè¯)

### ğŸ§  **è®°å¿†åŒ–ä¼˜åŒ–**

```typescript
// å‚è€ƒç°æœ‰Buttonç»„ä»¶çš„ä¼˜åŒ–æ¨¡å¼
const MemoizedMessageItem = React.memo(MessageItem);
const MemoizedCategoryArea = React.memo(CategoryArea);

const unreadCount = useMemo(() => {
  return conversations.filter(c => !c.isRead).length;
}, [conversations]);

const handlePress = useCallback((id: string) => {
  router.push(`/messages/chat/${id}`);
}, [router]);
```

### ğŸ“œ **åˆ—è¡¨ä¼˜åŒ–**

```typescript
// å‚è€ƒç°æœ‰Homepage/UserListAreaçš„ä¼˜åŒ–é…ç½®
<FlatList
  data={conversations}
  renderItem={renderMessageItem}
  keyExtractor={(item) => item.id}
  removeClippedSubviews={true}
  maxToRenderPerBatch={10}
  windowSize={10}
  initialNumToRender={10}
  // é¿å…å¤æ‚çš„getItemLayoutï¼Œä½¿ç”¨ç®€å•çš„è™šæ‹ŸåŒ–
/>
```

### ğŸ’¾ **ç¼“å­˜ç­–ç•¥**

```typescript
// APIç¼“å­˜ (å¤ç”¨ç°æœ‰api/client.tsçš„ç¼“å­˜æœºåˆ¶)
// ZustandæŒä¹…åŒ– (ä½¿ç”¨AsyncStorage)
// ç»„ä»¶è®¡ç®—ç¼“å­˜ (useMemo)
// å›¾ç‰‡ç¼“å­˜ (Expo Imageè‡ªå¸¦)
```

---

## ğŸš€ **åˆ†é˜¶æ®µå®æ–½è®¡åˆ’**

### ğŸ”´ **ç¬¬ä¸€é˜¶æ®µ (1-2å¤©) - æ¶æ„æ­å»º**

**ç›®æ ‡**: åˆ›å»ºåŸºç¡€æ¶æ„å’Œæ ¸å¿ƒç»„ä»¶

#### ğŸ“‹ **ä»»åŠ¡æ¸…å•**

1. **åˆ›å»ºç›®å½•ç»“æ„**
   - [ ] åˆ›å»º `src/features/Messages/` ç›®å½•
   - [ ] åˆ›å»º `app/(tabs)/messages/` è·¯ç”±ç›®å½•
   - [ ] åˆ›å»ºå­é¡µé¢ç›®å½• (MainPage, LikesPage, etc.)
   - [ ] åˆ›å»ºSharedComponentsç›®å½•
   - [ ] åˆ›å»ºapiå’Œstoresç›®å½•

2. **åˆ›å»ºæ ¸å¿ƒæ–‡ä»¶**
   - [ ] åˆ›å»ºæ‰€æœ‰index.tsxæ–‡ä»¶ (ç©ºæ¨¡æ¿)
   - [ ] åˆ›å»ºæ‰€æœ‰types.tsæ–‡ä»¶
   - [ ] åˆ›å»ºæ‰€æœ‰constants.tsæ–‡ä»¶
   - [ ] åˆ›å»ºæ‰€æœ‰README.mdæ–‡ä»¶

3. **è·¯ç”±é…ç½®**
   - [ ] åˆ›å»ºmessagesè·¯ç”±ç›®å½•å’Œ_layout.tsx
   - [ ] åˆ›å»ºæ‰€æœ‰Screenè·¯ç”±æ–‡ä»¶
   - [ ] é…ç½®è·¯ç”±å‚æ•°å’Œè·³è½¬
   - [ ] æµ‹è¯•è·¯ç”±å¯¼èˆª

4. **æ ¸å¿ƒç»„ä»¶å®æ–½**
   - [ ] åŸºäºButton.tsxåˆ›å»ºMessageItemç»„ä»¶æ¨¡æ¿
   - [ ] å®ç°UserAvatarç»„ä»¶
   - [ ] å®ç°åŸºç¡€çš„CategoryAreaç»„ä»¶
   - [ ] å®ç°åŸºç¡€çš„ConversationAreaç»„ä»¶

5. **çŠ¶æ€ç®¡ç†åˆå§‹åŒ–**
   - [ ] åŸºäºhomepageStoreåˆ›å»ºmessagesStore
   - [ ] åˆ›å»ºchatStore
   - [ ] åˆ›å»ºwebSocketStore
   - [ ] æµ‹è¯•Storeé›†æˆ

#### âœ… **éªŒæ”¶æ ‡å‡†**
- è·¯ç”±ç³»ç»Ÿå®Œæ•´é…ç½®ï¼Œæ‰€æœ‰é¡µé¢å¯è®¿é—®
- æ ¸å¿ƒç»„ä»¶æ¨¡æ¿åˆ›å»ºå®Œæˆï¼Œéµå¾ªå…«æ®µå¼ç»“æ„
- çŠ¶æ€ç®¡ç†åŸºç¡€æ¶æ„å»ºç«‹ï¼ŒStoreå¯ç”¨
- ç›®å½•ç»“æ„ä¸ç°æœ‰Homepage/AuthModuleå®Œå…¨ä¸€è‡´

---

### ğŸŸ¡ **ç¬¬äºŒé˜¶æ®µ (3-5å¤©) - æ ¸å¿ƒåŠŸèƒ½å®ç°**

**ç›®æ ‡**: å®ç°æ¶ˆæ¯æ¨¡å—æ ¸å¿ƒåŠŸèƒ½

#### ğŸ“‹ **ä»»åŠ¡æ¸…å•**

1. **MainPageä¸»é¡µé¢å®ç°**
   - [ ] å®ç°å®Œæ•´çš„MainPageç»„ä»¶ (åŸºäºHomepageæ¨¡å¼)
   - [ ] å®ç°CategoryArea 4å®«æ ¼å¸ƒå±€
   - [ ] å®ç°ConversationAreaå¯¹è¯åˆ—è¡¨
   - [ ] å®ç°NavigationAreaå¯¼èˆªæ 
   - [ ] é›†æˆçŠ¶æ€ç®¡ç†å’ŒAPIè°ƒç”¨

2. **APIæ¥å£å®ç°**
   - [ ] å®ç°messagesApiæ¥å£
   - [ ] å®ç°chatApiæ¥å£
   - [ ] å®ç°notificationsApiæ¥å£
   - [ ] æµ‹è¯•APIè°ƒç”¨å’Œé”™è¯¯å¤„ç†

3. **WebSocketé›†æˆ**
   - [ ] å®ç°WebSocketManager
   - [ ] é›†æˆSocket.ioè¿æ¥
   - [ ] å®ç°æ¶ˆæ¯æ¥æ”¶å’Œå‘é€
   - [ ] å®ç°é‡è¿æœºåˆ¶

4. **ç§»åŠ¨ç«¯äº¤äº’**
   - [ ] å®ç°SwipeActionsæ»‘åŠ¨æ“ä½œ
   - [ ] é›†æˆexpo-hapticsè§¦è§‰åé¦ˆ
   - [ ] å®ç°é•¿æŒ‰èœå•
   - [ ] æµ‹è¯•ç§»åŠ¨ç«¯æ‰‹åŠ¿

5. **åŸºç¡€èŠå¤©åŠŸèƒ½**
   - [ ] å®ç°ChatPageé¡µé¢
   - [ ] å®ç°ChatBubbleæ¶ˆæ¯æ°”æ³¡
   - [ ] å®ç°æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
   - [ ] å®ç°æ¶ˆæ¯åˆ—è¡¨æ»šåŠ¨

#### âœ… **éªŒæ”¶æ ‡å‡†**
- MainPageåŠŸèƒ½å®Œæ•´ï¼Œå¯æ­£å¸¸æ˜¾ç¤ºå’Œäº¤äº’
- APIæ¥å£è°ƒç”¨æˆåŠŸï¼Œæ•°æ®æ­£å¸¸å±•ç¤º
- WebSocketè¿æ¥ç¨³å®šï¼Œæ¶ˆæ¯å®æ—¶æ›´æ–°
- ç§»åŠ¨ç«¯äº¤äº’æµç•…ï¼Œè§¦è§‰åé¦ˆåŠæ—¶
- åŸºç¡€èŠå¤©åŠŸèƒ½å¯ç”¨ï¼Œæ¶ˆæ¯æ­£å¸¸æ”¶å‘

---

### ğŸŸ¢ **ç¬¬ä¸‰é˜¶æ®µ (5-7å¤©) - åŠŸèƒ½å®Œå–„å’Œä¼˜åŒ–**

**ç›®æ ‡**: å®Œå–„æ‰€æœ‰é¡µé¢å’Œé«˜çº§åŠŸèƒ½

#### ğŸ“‹ **ä»»åŠ¡æ¸…å•**

1. **å­é¡µé¢å®ç°**
   - [ ] å®ç°LikesPageé¡µé¢
   - [ ] å®ç°CommentsPageé¡µé¢
   - [ ] å®ç°FollowersPageé¡µé¢
   - [ ] å®ç°NotificationsPageé¡µé¢
   - [ ] ç»Ÿä¸€é¡µé¢äº¤äº’å’Œæ ·å¼

2. **é«˜çº§èŠå¤©åŠŸèƒ½**
   - [ ] å®ç°å›¾ç‰‡æ¶ˆæ¯å‘é€å’Œé¢„è§ˆ
   - [ ] å®ç°è¯­éŸ³æ¶ˆæ¯å½•åˆ¶å’Œæ’­æ”¾ (å¯é€‰)
   - [ ] å®ç°æ¶ˆæ¯çŠ¶æ€æŒ‡ç¤º (å·²å‘é€/å·²è¯»)
   - [ ] å®ç°æ¶ˆæ¯é‡å‘æœºåˆ¶

3. **æ€§èƒ½ä¼˜åŒ–**
   - [ ] ä¼˜åŒ–FlatListè™šæ‹ŸåŒ–
   - [ ] ä¼˜åŒ–å›¾ç‰‡åŠ è½½å’Œç¼“å­˜
   - [ ] ä¼˜åŒ–çŠ¶æ€æ›´æ–°å’Œæ¸²æŸ“
   - [ ] å†…å­˜æ³„æ¼æ£€æŸ¥å’Œä¿®å¤

4. **æ¨é€é€šçŸ¥é›†æˆ** (å¯é€‰)
   - [ ] é›†æˆExpo Notifications
   - [ ] å®ç°æœ¬åœ°é€šçŸ¥
   - [ ] å®ç°è¿œç¨‹æ¨é€é€šçŸ¥
   - [ ] æµ‹è¯•é€šçŸ¥æ˜¾ç¤ºå’Œç‚¹å‡»

5. **æµ‹è¯•å’Œä¼˜åŒ–**
   - [ ] å•å…ƒæµ‹è¯•ç¼–å†™
   - [ ] é›†æˆæµ‹è¯•ç¼–å†™
   - [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
   - [ ] Bugä¿®å¤å’Œå®Œå–„

#### âœ… **éªŒæ”¶æ ‡å‡†**
- æ‰€æœ‰é¡µé¢åŠŸèƒ½å®Œæ•´ï¼Œäº¤äº’æµç•…
- é«˜çº§èŠå¤©åŠŸèƒ½å¯ç”¨ï¼Œç”¨æˆ·ä½“éªŒè‰¯å¥½
- æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡ (é¦–å±<500ms, å†…å­˜å¢é•¿<50MB)
- æ¨é€é€šçŸ¥æ­£å¸¸å·¥ä½œ (å¦‚å®æ–½)
- æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°80%+

---

## ğŸ“Š **è´¨é‡æ£€æŸ¥æ¸…å•**

### âœ… **æ¶æ„å®Œæ•´æ€§æ£€æŸ¥**

- [ ] ç›®å½•ç»“æ„ä¸ç°æœ‰Homepage/AuthModuleå®Œå…¨ä¸€è‡´
- [ ] æ‰€æœ‰index.tsxæ–‡ä»¶ä¸¥æ ¼éµå¾ªå…«æ®µå¼ç»“æ„
- [ ] å‘½åè§„èŒƒç¬¦åˆFeature/Page/Area/Componentä½“ç³»
- [ ] è·¯ç”±é…ç½®å®Œæ•´ï¼Œæ‰€æœ‰é¡µé¢å¯è®¿é—®
- [ ] çŠ¶æ€ç®¡ç†åˆ†å±‚æ¸…æ™°ï¼ŒStoreèŒè´£å•ä¸€
- [ ] APIè®¾è®¡ç®€æ´ï¼Œéµå¾ªYAGNIåŸåˆ™

### ğŸ¨ **è®¾è®¡ä¸€è‡´æ€§æ£€æŸ¥**

- [ ] ä¸»é¢˜é¢œè‰²ä¸ç°æœ‰Buttonç»„ä»¶ç»Ÿä¸€ (#6366F1)
- [ ] ç»„ä»¶æ ·å¼ä¸ç°æœ‰é¡µé¢é£æ ¼ä¸€è‡´
- [ ] å“åº”å¼å¸ƒå±€æ­£ç¡®é€‚é…ä¸åŒå±å¹•
- [ ] å®‰å…¨åŒºåŸŸæ­£ç¡®å¤„ç† (iOSåˆ˜æµ·å±)
- [ ] å­—ä½“å¤§å°å’Œé—´è·ç¬¦åˆè®¾è®¡è§„èŒƒ
- [ ] åŠ¨ç”»æ•ˆæœæµç•…è‡ªç„¶

### ğŸ”§ **ä»£ç è´¨é‡æ£€æŸ¥**

- [ ] TypeScriptç±»å‹å®šä¹‰å®Œæ•´
- [ ] æ‰€æœ‰Propsæ¥å£æ¸…æ™°ç®€æ´
- [ ] ç»„ä»¶éµå¾ªå•ä¸€èŒè´£åŸåˆ™
- [ ] äº‹ä»¶å¤„ç†ä½¿ç”¨useCallbackç¼“å­˜
- [ ] è®¡ç®—å±æ€§ä½¿ç”¨useMemoç¼“å­˜
- [ ] ç»„ä»¶ä½¿ç”¨React.memoä¼˜åŒ–

### ğŸ“± **ç§»åŠ¨ç«¯é€‚é…æ£€æŸ¥**

- [ ] iOSå’ŒAndroidåŒå¹³å°æµ‹è¯•é€šè¿‡
- [ ] è§¦è§‰åé¦ˆæ­£å¸¸å·¥ä½œ
- [ ] æ‰‹åŠ¿è¯†åˆ«å‡†ç¡®æµç•…
- [ ] é”®ç›˜é¿è®©æ­£å¸¸å·¥ä½œ
- [ ] å®‰å…¨åŒºåŸŸé€‚é…æ­£ç¡®
- [ ] ç½‘ç»œçŠ¶æ€æ­£ç¡®å¤„ç†

### âš¡ **æ€§èƒ½æŒ‡æ ‡æ£€æŸ¥**

- [ ] é¦–å±æ¸²æŸ“æ—¶é—´ < 500ms
- [ ] æ¶ˆæ¯å‘é€å“åº”æ—¶é—´ < 200ms
- [ ] åˆ—è¡¨æ»šåŠ¨æµç•… (60fps)
- [ ] å†…å­˜ä½¿ç”¨æ­£å¸¸å¢é•¿ < 50MB
- [ ] æ— å†…å­˜æ³„æ¼é—®é¢˜
- [ ] æ— å´©æºƒé”™è¯¯

---

## ğŸ› ï¸ **AIä¿®æ”¹æŒ‡å—**

### âœ… **æ·»åŠ æ–°é¡µé¢**

```typescript
1. åœ¨ src/features/Messages/ ä¸‹åˆ›å»ºæ–°é¡µé¢ç›®å½•
2. å‚è€ƒMainPageå®ç°å…«æ®µå¼ç»“æ„çš„ index.tsx
3. åœ¨ Messages/index.ts ä¸­å¯¼å‡ºæ–°é¡µé¢
4. åœ¨ app/(tabs)/messages/ ä¸‹åˆ›å»ºå¯¹åº”è·¯ç”±æ–‡ä»¶
5. æ›´æ–° constants.ts ä¸­çš„è·¯ç”±é…ç½®
```

### âœ… **æ·»åŠ æ–°åŒºåŸŸç»„ä»¶**

```typescript
1. åœ¨ Page/components/ ä¸‹åˆ›å»ºæ–°åŒºåŸŸç›®å½•
2. å®ç°å…«æ®µå¼ç»“æ„çš„ index.tsx
3. åœ¨ components/index.ts ä¸­å¯¼å‡º
4. åœ¨ Page/index.tsx ä¸­å¯¼å…¥å’Œä½¿ç”¨
5. æ›´æ–°é¡µé¢çš„ constants.ts é…ç½®
```

### âœ… **æ·»åŠ æ–°å…±äº«ç»„ä»¶**

```typescript
1. åœ¨ SharedComponents/ ä¸‹åˆ›å»ºæ–°ç»„ä»¶ç›®å½•
2. åŸºäºButton.tsxæ¨¡æ¿å®ç°å…«æ®µå¼ç»“æ„
3. åœ¨ SharedComponents/index.ts ä¸­å¯¼å‡º
4. åœ¨éœ€è¦çš„é¡µé¢ä¸­å¯¼å…¥ä½¿ç”¨
5. ç¼–å†™ç»„ä»¶README.mdæ–‡æ¡£
```

### âœ… **ä¿®æ”¹ç°æœ‰ç»„ä»¶**

```typescript
1. å®šä½åˆ°å¯¹åº”ç»„ä»¶ç›®å½•
2. ä¿®æ”¹ index.tsx ä¸­çš„å¯¹åº”æ®µè½ï¼š
   - #region 3: ä¿®æ”¹ç±»å‹å®šä¹‰
   - #region 4: ä¿®æ”¹å¸¸é‡é…ç½®  
   - #region 6: ä¿®æ”¹çŠ¶æ€ç®¡ç†
   - #region 7: ä¿®æ”¹ä¸šåŠ¡é€»è¾‘
   - #region 8: ä¿®æ”¹UIæ¸²æŸ“
3. æ›´æ–°types.tså’Œconstants.ts (å¦‚éœ€è¦)
4. æµ‹è¯•ä¿®æ”¹æ•ˆæœ
```

### âœ… **æ·»åŠ æ–°APIæ¥å£**

```typescript
1. åœ¨å¯¹åº”APIæ–‡ä»¶ä¸­æ·»åŠ æ–¹æ³•
2. åœ¨Storeçš„actionä¸­è°ƒç”¨
3. å¤„ç†loadingã€errorçŠ¶æ€
4. æ›´æ–°UIç»„ä»¶æ˜¾ç¤º
5. ç¼–å†™APIæ–‡æ¡£è¯´æ˜
```

---

## ğŸ¯ **å¿«é€Ÿå®šä½æŒ‡å—**

### ğŸ” **åŠŸèƒ½å®šä½è¡¨**

| éœ€è¦ä¿®æ”¹çš„åŠŸèƒ½ | ä¸»è¦æ–‡ä»¶ä½ç½® | ç›¸å…³Store | æ¶‰åŠAPI | å‘½åå±‚çº§ |
|---------------|-------------|-----------|---------|----------|
| æ¶ˆæ¯åˆ†ç±»å…¥å£ | CategoryArea | messagesStore | messagesApi | Areaå±‚ |
| å¯¹è¯åˆ—è¡¨ | ConversationArea | messagesStore | messagesApi | Areaå±‚ |
| å¯¼èˆªæ  | NavigationArea | - | - | Areaå±‚ |
| èµå’Œæ”¶è— | LikesPage | messagesStore | notificationsApi | Pageå±‚ |
| è¯„è®ºæ¶ˆæ¯ | CommentsPage | messagesStore | notificationsApi | Pageå±‚ |
| ç²‰ä¸æ¶ˆæ¯ | FollowersPage | messagesStore | notificationsApi | Pageå±‚ |
| ç³»ç»Ÿé€šçŸ¥ | NotificationsPage | messagesStore | notificationsApi | Pageå±‚ |
| ç§èŠå¯¹è¯ | ChatPage | chatStore | chatApi | Pageå±‚ |
| æ¶ˆæ¯åˆ—è¡¨é¡¹ | MessageItem | - | - | Componentå±‚ |
| æ¶ˆæ¯æ°”æ³¡ | ChatBubble | - | - | Componentå±‚ |

### ğŸ¯ **å‘½åè§„èŒƒé€ŸæŸ¥è¡¨**

| ä¿®æ”¹ç±»å‹ | æ–‡ä»¶ä½ç½® | å‘½åè§„èŒƒ | ä½œç”¨ |
|---------|----------|----------|------|
| **è·¯ç”±é¡µé¢** | `app/(tabs)/messages/` | `XxxScreen` | è·¯ç”±é€‚é…å™¨ï¼Œå¤„ç†å¯¼èˆªå’Œé¡µé¢åŒ…è£… |
| **ä¸šåŠ¡é¡µé¢** | `src/features/Messages/` | `XxxPage` | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ŒçŠ¶æ€ç®¡ç†ï¼Œç»„ä»¶ç¼–æ’ |
| **åŠŸèƒ½åŒºåŸŸ** | `Page/components/` | `XxxArea` | é¡µé¢åŠŸèƒ½åŒºåŸŸï¼Œä¸“æ³¨ç‰¹å®šåŠŸèƒ½ |
| **å…±äº«ç»„ä»¶** | `SharedComponents/` | `XxxComponent` | æ¨¡å—å†…å¯å¤ç”¨ç»„ä»¶ |
| **çŠ¶æ€ç®¡ç†** | `stores/` | `xxxStore` | ZustandçŠ¶æ€å­˜å‚¨ |
| **APIæœåŠ¡** | `api/` | `xxxApi` | APIæ¥å£æœåŠ¡ |

---

## âš ï¸ **é‡è¦çº¦æŸä¸è§„èŒƒ**

### ğŸš¨ **å¿…é¡»éµå¾ªçš„è§„åˆ™**

1. **å…«æ®µå¼ç»“æ„** - æ‰€æœ‰ `index.tsx` å¿…é¡»ä½¿ç”¨å…«æ®µå¼ç»„ç»‡
2. **ä¸»æ–‡ä»¶ä¼˜å…ˆ** - ä¼˜å…ˆåœ¨ä¸»æ–‡ä»¶å†…é›†ä¸­ç®¡ç†é€»è¾‘ï¼Œå¤æ‚é€»è¾‘å¯é€‚åº¦æŠ½ç¦»
3. **ç±»å‹å®‰å…¨** - æ‰€æœ‰æ¥å£å¿…é¡»æœ‰å®Œæ•´TypeScriptç±»å‹å®šä¹‰
4. **é”™è¯¯å¤„ç†** - æ¯ä¸ªå¼‚æ­¥æ“ä½œå¿…é¡»æœ‰é”™è¯¯å¤„ç†æœºåˆ¶
5. **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨ React.memoã€useCallbackã€useMemo
6. **æ¶æ„ä¸€è‡´** - ä¸ç°æœ‰Homepage/AuthModuleä¿æŒå®Œå…¨ä¸€è‡´

### ğŸ”§ **å…³é”®ä¾èµ–**

```json
// åŸºäºç°æœ‰é¡¹ç›®çš„ä¾èµ–
"zustand": "^5.0.8",                    // çŠ¶æ€ç®¡ç†
"@react-native-async-storage/async-storage",  // æŒä¹…åŒ–å­˜å‚¨
"expo-router": "~6.0.8",               // è·¯ç”±ç³»ç»Ÿ
"react-native-safe-area-context",      // å®‰å…¨åŒºåŸŸ
"socket.io-client": "^4.7.0",          // WebSocketå®¢æˆ·ç«¯
"expo-haptics": "~13.0.3",             // è§¦è§‰åé¦ˆ
"react-native-gesture-handler": "~2.16.0"  // æ‰‹åŠ¿è¯†åˆ«
```

### ğŸ“‹ **æ–‡ä»¶å‘½åè§„èŒƒ**

```
ä¸»æ–‡ä»¶ï¼šindex.tsx (å…«æ®µå¼ç»“æ„)
ç±»å‹ï¼štypes.ts
å¸¸é‡ï¼šconstants.ts  
æ ·å¼ï¼šstyles.ts (å¯é€‰ï¼Œå¤æ‚é¡µé¢ä½¿ç”¨)
æ–‡æ¡£ï¼šREADME.md
```

---

## ğŸ“– **å‚è€ƒæ–‡æ¡£**

### ğŸ† **ç°æœ‰é¡¹ç›®å‚è€ƒ**

- **Homepageæ¨¡å—**: `src/features/Homepage/`
  - å‚è€ƒMainPageçš„å…«æ®µå¼ç»“æ„
  - å‚è€ƒåŒºåŸŸç»„ä»¶çš„åˆ’åˆ†æ–¹å¼
  - å‚è€ƒStoreå’ŒAPIçš„é›†æˆæ¨¡å¼

- **AuthModuleæ¨¡å—**: `src/features/AuthModule/`
  - å‚è€ƒé¡µé¢æµç¨‹è®¾è®¡
  - å‚è€ƒçŠ¶æ€ç®¡ç†æ¨¡å¼
  - å‚è€ƒé”™è¯¯å¤„ç†æœºåˆ¶

- **Buttonç»„ä»¶**: `src/components/ui/Button.tsx`
  - ä½œä¸ºå…«æ®µå¼æ¶æ„çš„æ ‡å‡†æ¨¡æ¿
  - å‚è€ƒç§»åŠ¨ç«¯é€‚é…æ–¹å¼
  - å‚è€ƒæ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### ğŸ“š **è®¾è®¡æ ‡å‡†æ–‡æ¡£**

- **UNIVERSAL_COMPONENT_ARCHITECTURE_CORE v2.5**
  - æ ¸å¿ƒæ¶æ„æ ‡å‡†
  - å…«æ®µå¼ä»£ç ç»“æ„
  - å‘½åè§„èŒƒä½“ç³»

- **æ¶ˆæ¯æ¨¡å—è®¾è®¡åˆ†ææŠ¥å‘Š**
  - æ¶æ„ä¿®æ­£è¯´æ˜
  - æŠ€æœ¯æ ˆè°ƒæ•´æ–¹æ¡ˆ
  - ç»„ä»¶ç®€åŒ–è®¾è®¡

---

## ğŸ¯ **æ€»ç»“**

### âœ… **æ ¸å¿ƒä¼˜åŠ¿**

1. **æ¶æ„ä¸€è‡´æ€§**: 100%ä¸ç°æœ‰Homepage/AuthModuleæ¶æ„ä¸€è‡´
2. **ç»„ä»¶æ¨¡æ¿**: åŸºäºç°æœ‰Button.tsxçš„å®Œç¾å…«æ®µå¼æ¨¡æ¿
3. **æŠ€æœ¯æ ˆç»Ÿä¸€**: å®Œå…¨å…¼å®¹ç°æœ‰é¡¹ç›®çš„æŠ€æœ¯é€‰å‹
4. **è®¾è®¡ç®€åŒ–**: éµå¾ªYAGNIåŸåˆ™ï¼Œé¿å…è¿‡åº¦è®¾è®¡
5. **ç§»åŠ¨ç«¯ä¼˜åŒ–**: è¡¥å……ç§»åŠ¨ç«¯å¿…éœ€çš„äº¤äº’ç»„ä»¶

### ğŸš€ **é¢„æœŸæ•ˆæœ**

- **å®æ–½æ•ˆç‡**: åŸºäºç°æœ‰æ¨¡æ¿ï¼Œå¼€å‘æ•ˆç‡æå‡50%+
- **ä»£ç è´¨é‡**: ç»§æ‰¿ç°æœ‰é¡¹ç›®çš„é«˜è´¨é‡ä»£ç æ ‡å‡†
- **ç”¨æˆ·ä½“éªŒ**: ä¸ç°æœ‰é¡µé¢æ— ç¼è¡”æ¥çš„ç”¨æˆ·ä½“éªŒ
- **å¯ç»´æŠ¤æ€§**: ç»Ÿä¸€çš„æ¶æ„æ ‡å‡†ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

### ğŸ¯ **å¼€å§‹å®æ–½**

**æŒ‰ç…§åˆ†é˜¶æ®µå®æ–½è®¡åˆ’ï¼Œä»ç¬¬ä¸€é˜¶æ®µå¼€å§‹ï¼š**
1. åˆ›å»ºç›®å½•ç»“æ„
2. åˆ›å»ºæ ¸å¿ƒæ–‡ä»¶
3. é…ç½®è·¯ç”±ç³»ç»Ÿ
4. å®ç°æ ¸å¿ƒç»„ä»¶
5. åˆå§‹åŒ–çŠ¶æ€ç®¡ç†

**ä¸¥æ ¼éµå¾ªæœ¬æ–‡æ¡£çš„æ¶æ„æ ‡å‡†å’Œå®æ–½æŒ‡å—ï¼Œç¡®ä¿é¡¹ç›®çš„é•¿æœŸå¯ç»´æŠ¤æ€§å’ŒæŠ€æœ¯å€ºåŠ¡æœ€å°åŒ–ã€‚**

---

**ğŸ“… åˆ›å»ºæ—¶é—´**: 2025å¹´9æœˆ29æ—¥  
**ğŸ”„ ç‰ˆæœ¬**: v2.0 (ä¿®æ­£ç‰ˆ)  
**ğŸ“ ç»´æŠ¤è€…**: AIåä½œå›¢é˜Ÿ  
**ğŸ¯ ç”¨é€”**: æ¶ˆæ¯æ¨¡å—å®æ–½çš„å®Œæ•´æŒ‡å—  
**ğŸ† è´¨é‡æ ‡å‡†**: ä¸Homepage/AuthModuleåŒç­‰è´¨é‡å’Œæ¶æ„æ ‡å‡†  
**ğŸ“– å‚è€ƒæ ‡å‡†**: UNIVERSAL_COMPONENT_ARCHITECTURE_CORE v2.5
